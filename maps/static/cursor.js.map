{"version":3,"file":"../../static/cursor.js","names":["Ex","constructor","this","pos","curr","prev","create","init","rendering","render","startCheckInterval","move","e","t","cursor","style","left","top","document","createElement","id","classList","add","body","append","onmousemove","clientX","clientY","x","y","remove","onmouseenter","onmouseleave","onmousedown","onmouseup","Math","lerp","requestAnimationFrame","setInterval","isMouseInsideViewport","window","innerWidth","innerHeight","pauseRendering","resumeRendering","start","end","amt","cursorInstance","IntersectionObserver","entries","forEach","entry","isIntersecting","observe"],"sources":["static/cursor.js"],"mappings":"AAAA,MAAMA,GACF,WAAAC,GACIC,KAAKC,IAAM,CAAEC,KAAM,KAAMC,KAAM,MAC/BH,KAAKI,SACLJ,KAAKK,OACLL,KAAKM,WAAY,EACjBN,KAAKO,SACLP,KAAKQ,oBACT,CAEA,IAAAC,CAAKC,EAAGC,GACJX,KAAKY,OAAOC,MAAMC,KAAO,GAAGJ,MAC5BV,KAAKY,OAAOC,MAAME,IAAM,GAAGJ,KAC/B,CAEA,MAAAP,GACSJ,KAAKY,SACNZ,KAAKY,OAASI,SAASC,cAAc,OACrCjB,KAAKY,OAAOM,GAAK,SACjBlB,KAAKY,OAAOO,UAAUC,IAAI,YAAa,UACvCJ,SAASK,KAAKC,OAAOtB,KAAKY,QAElC,CAEA,IAAAP,GACIW,SAASO,YAAcb,IACE,MAAjBV,KAAKC,IAAIC,MAAcF,KAAKS,KAAKC,EAAEc,QAAU,EAAGd,EAAEe,QAAU,GAChEzB,KAAKC,IAAIC,KAAO,CAAEwB,EAAGhB,EAAEc,QAAU,EAAGG,EAAGjB,EAAEe,QAAU,GACnDzB,KAAKY,OAAOO,UAAUS,OAAO,SAAS,EAE1CZ,SAASa,aAAe,IAAM7B,KAAKY,OAAOO,UAAUS,OAAO,UAC3DZ,SAASc,aAAe,IAAM9B,KAAKY,OAAOO,UAAUC,IAAI,UACxDJ,SAASe,YAAc,IAAM/B,KAAKY,OAAOO,UAAUC,IAAI,UACvDJ,SAASgB,UAAY,IAAMhC,KAAKY,OAAOO,UAAUS,OAAO,SAC5D,CAEA,MAAArB,GACQP,KAAKM,YACDN,KAAKC,IAAIE,MACTH,KAAKC,IAAIE,KAAKuB,EAAIO,KAAKC,KAAKlC,KAAKC,IAAIE,KAAKuB,EAAG1B,KAAKC,IAAIC,KAAKwB,EAAG,KAC9D1B,KAAKC,IAAIE,KAAKwB,EAAIM,KAAKC,KAAKlC,KAAKC,IAAIE,KAAKwB,EAAG3B,KAAKC,IAAIC,KAAKyB,EAAG,KAC9D3B,KAAKS,KAAKT,KAAKC,IAAIE,KAAKuB,EAAG1B,KAAKC,IAAIE,KAAKwB,IAEzC3B,KAAKC,IAAIE,KAAOH,KAAKC,IAAIC,KAE7BiC,uBAAsB,IAAMnC,KAAKO,WAEzC,CAEA,kBAAAC,GACI4B,aAAY,KACJpC,KAAKC,IAAIC,OAASF,KAAKqC,yBAAyBrC,KAAKY,OAAOO,UAAUC,IAAI,SAAS,GACxF,IACP,CAEA,qBAAAiB,GACI,OAAOrC,KAAKC,IAAIC,KAAKwB,GAAK,GAAK1B,KAAKC,IAAIC,KAAKyB,GAAK,GAAK3B,KAAKC,IAAIC,KAAKwB,GAAKY,OAAOC,YAAcvC,KAAKC,IAAIC,KAAKyB,GAAKW,OAAOE,WAC7H,CAEA,cAAAC,GAAmBzC,KAAKM,WAAY,CAAO,CAE3C,eAAAoC,GACS1C,KAAKM,YACNN,KAAKM,WAAY,EACjBN,KAAKO,SAEb,EAGJ0B,KAAKC,KAAO,CAACS,EAAOC,EAAKC,KAAS,EAAIA,GAAOF,EAAQE,EAAMD,EAG3D,MAAME,eAAiB,IAAIhD,GAC3B,IAAIiD,sBAAqBC,IACrBA,EAAQC,SAAQC,IACZA,EAAMC,eAAiBL,eAAeJ,kBAAoBI,eAAeL,gBAAgB,GAC3F,IACHW,QAAQpC,SAASK","ignoreList":[],"sourcesContent":["class Ex {\n    constructor() {\n        this.pos = { curr: null, prev: null };\n        this.create();\n        this.init();\n        this.rendering = true;\n        this.render();\n        this.startCheckInterval();\n    }\n\n    move(e, t) {\n        this.cursor.style.left = `${e}px`;\n        this.cursor.style.top = `${t}px`;\n    }\n\n    create() {\n        if (!this.cursor) {\n            this.cursor = document.createElement(\"div\");\n            this.cursor.id = \"cursor\";\n            this.cursor.classList.add(\"xs-hidden\", \"hidden\");\n            document.body.append(this.cursor);\n        }\n    }\n\n    init() {\n        document.onmousemove = e => {\n            if (this.pos.curr == null) this.move(e.clientX - 8, e.clientY - 8);\n            this.pos.curr = { x: e.clientX - 8, y: e.clientY - 8 };\n            this.cursor.classList.remove(\"hidden\");\n        };\n        document.onmouseenter = () => this.cursor.classList.remove(\"hidden\");\n        document.onmouseleave = () => this.cursor.classList.add(\"hidden\");\n        document.onmousedown = () => this.cursor.classList.add(\"active\");\n        document.onmouseup = () => this.cursor.classList.remove(\"active\");\n    }\n\n    render() {\n        if (this.rendering) {\n            if (this.pos.prev) {\n                this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, .35);\n                this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, .35);\n                this.move(this.pos.prev.x, this.pos.prev.y);\n            } else {\n                this.pos.prev = this.pos.curr;\n            }\n            requestAnimationFrame(() => this.render());\n        }\n    }\n\n    startCheckInterval() {\n        setInterval(() => {\n            if (this.pos.curr && !this.isMouseInsideViewport()) this.cursor.classList.add(\"hidden\");\n        }, 100);\n    }\n\n    isMouseInsideViewport() {\n        return this.pos.curr.x >= 0 && this.pos.curr.y >= 0 && this.pos.curr.x <= window.innerWidth && this.pos.curr.y <= window.innerHeight;\n    }\n\n    pauseRendering() { this.rendering = false; }\n\n    resumeRendering() {\n        if (!this.rendering) {\n            this.rendering = true;\n            this.render();\n        }\n    }\n}\n\nMath.lerp = (start, end, amt) => (1 - amt) * start + amt * end;\n\n// 直接创建实例并监听全局事件\nconst cursorInstance = new Ex();\nnew IntersectionObserver(entries => {\n    entries.forEach(entry => {\n        entry.isIntersecting ? cursorInstance.resumeRendering() : cursorInstance.pauseRendering();\n    });\n}).observe(document.body);"]}