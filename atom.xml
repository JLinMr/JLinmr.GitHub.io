<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>梦爱吃鱼</title>
  
  <subtitle>日子清静</subtitle>
  <link href="https://blog.bsgun.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.bsgun.cn/"/>
  <updated>2024-10-03T08:59:05.476Z</updated>
  <id>https://blog.bsgun.cn/</id>
  
  <author>
    <name>梦爱吃鱼</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CF Worker部署Umami的API</title>
    <link href="https://blog.bsgun.cn/posts/d0612c0e/"/>
    <id>https://blog.bsgun.cn/posts/d0612c0e/</id>
    <published>2024-10-01T23:45:40.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>感谢@spark 提供的worker脚本，感谢张洪Heo提供的获取Token方法</p></blockquote><h2 id="前因"><a href="#前因" class="headerlink" title="前因"></a>前因</h2><p><img src="https://cdn.bsgun.cn/2024/10/02/863616.webp"></p><h2 id="准备食用"><a href="#准备食用" class="headerlink" title="准备食用"></a>准备食用</h2><blockquote><p>食用前需要烹饪一番</p></blockquote><p>首先进入<a href="https://hoppscotch.io/">Hoppscotch </a>获取token</p><p><img src="https://cdn.bsgun.cn/2024/10/02/317950.webp"></p><p>成功后会返回token信息</p><p><img src="https://cdn.bsgun.cn/2024/10/02/019698.webp"></p><h3 id="装盘"><a href="#装盘" class="headerlink" title="装盘"></a>装盘</h3><ol><li>直接去<a href="https://www.cloudflare.com/">cloudflare</a>创建一个<code>Workers</code>，修改名称点击部署</li><li>部署完后在右上角点击编辑代码修改<code>worker.js</code>的内容</li><li>粘贴下面的内容，并修改 <code>API_BASE_URL</code>、<code>TOKEN</code> 和<code>WEBSITE_ID</code>为你的内容</li></ol><p><img src="https://cdn.bsgun.cn/2024/10/02/312621.webp"></p><p><img src="https://cdn.bsgun.cn/2024/10/02/737239.webp"></p><p><img src="https://cdn.bsgun.cn/2024/10/02/234083.webp"></p><p><img src="https://cdn.bsgun.cn/2024/10/02/148897.webp"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_BASE_URL</span> = <span class="string">&#x27;https://umami.yourdomain.com&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TOKEN</span> = <span class="string">&#x27;your_token&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WEBSITE_ID</span> = <span class="string">&#x27;your_website_id&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_KEY</span> = <span class="string">&#x27;umami_cache&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_TIME</span> = <span class="number">600</span>; <span class="comment">// Cache time in seconds</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUmamiData</span>(<span class="params">startAt, endAt</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;API_BASE_URL&#125;</span>/api/websites/<span class="subst">$&#123;WEBSITE_ID&#125;</span>/stats?startAt=<span class="subst">$&#123;startAt&#125;</span>&amp;endAt=<span class="subst">$&#123;endAt&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;TOKEN&#125;</span>`</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Error fetching data: <span class="subst">$&#123;response.statusText&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">await</span> caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_KEY</span>);</span><br><span class="line">  <span class="keyword">const</span> cachedResponse = <span class="keyword">await</span> cache.<span class="title function_">match</span>(event.<span class="property">request</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (cachedResponse) &#123;</span><br><span class="line">    <span class="keyword">return</span> cachedResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="keyword">const</span> todayStart = <span class="keyword">new</span> <span class="title class_">Date</span>(now).<span class="title function_">setHours</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> yesterdayStart = <span class="keyword">new</span> <span class="title class_">Date</span>(now - <span class="number">86400000</span>).<span class="title function_">setHours</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> lastMonthStart = <span class="keyword">new</span> <span class="title class_">Date</span>(now).<span class="title function_">setMonth</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(now).<span class="title function_">getMonth</span>() - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> lastYearStart = <span class="keyword">new</span> <span class="title class_">Date</span>(now).<span class="title function_">setFullYear</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(now).<span class="title function_">getFullYear</span>() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [todayData, yesterdayData, lastMonthData, lastYearData] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    <span class="title function_">fetchUmamiData</span>(todayStart, now),</span><br><span class="line">    <span class="title function_">fetchUmamiData</span>(yesterdayStart, todayStart),</span><br><span class="line">    <span class="title function_">fetchUmamiData</span>(lastMonthStart, now),</span><br><span class="line">    <span class="title function_">fetchUmamiData</span>(lastYearStart, now)</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> responseData = &#123;</span><br><span class="line">    <span class="attr">today_uv</span>: todayData?.<span class="property">visitors</span>?.<span class="property">value</span> ?? <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">today_pv</span>: todayData?.<span class="property">pageviews</span>?.<span class="property">value</span> ?? <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">yesterday_uv</span>: yesterdayData?.<span class="property">visitors</span>?.<span class="property">value</span> ?? <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">yesterday_pv</span>: yesterdayData?.<span class="property">pageviews</span>?.<span class="property">value</span> ?? <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">last_month_pv</span>: lastMonthData?.<span class="property">pageviews</span>?.<span class="property">value</span> ?? <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">last_year_pv</span>: lastYearData?.<span class="property">pageviews</span>?.<span class="property">value</span> ?? <span class="literal">null</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> jsonResponse = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(responseData), &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, PUT, DELETE, OPTIONS&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;Content-Type, Authorization&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  event.<span class="title function_">waitUntil</span>(cache.<span class="title function_">put</span>(event.<span class="property">request</span>, jsonResponse.<span class="title function_">clone</span>()));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> jsonResponse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="真香"><a href="#真香" class="headerlink" title="真香"></a>真香</h3><p>可以根据图片绑定自己的域名，也可以直接使用默认的</p><p><img src="https://cdn.bsgun.cn/2024/10/02/203223.webp"></p><p>访问后你会得到返回的JSON数据</p><p><img src="https://cdn.bsgun.cn/2024/10/02/121752.webp"></p><h2 id="吃完刷碗"><a href="#吃完刷碗" class="headerlink" title="吃完刷碗"></a>吃完刷碗</h2><p>都搞定了那就可以去修改魔改后的配置项了</p><p><img src="https://cdn.bsgun.cn/2024/10/02/806072.webp"></p><p>如果你还没魔改关于页面，可以看一下下面的文章</p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/posts/609bcdb9/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">配置Umami到about页</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;感谢@spark 提供的worker脚本，感谢张洪Heo提供的获取Token方法&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;前因&quot;&gt;&lt;a href=&quot;#前因&quot; class=&quot;headerlink&quot; title=&quot;前因&quot;&gt;&lt;/a&gt;前因&lt;/h</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Umami" scheme="https://blog.bsgun.cn/tags/Umami/"/>
    
    <category term="折腾" scheme="https://blog.bsgun.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>Twikoo邮件通知模板分享</title>
    <link href="https://blog.bsgun.cn/posts/9a5bb761/"/>
    <id>https://blog.bsgun.cn/posts/9a5bb761/</id>
    <published>2024-09-20T22:16:06.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前因"><a href="#前因" class="headerlink" title="前因"></a>前因</h2><p>昨天摸鱼的时候想改邮件模板，结果怎么改都不满意，最后向六神索取了一份他的模板进行了一些修改。</p><p><img src="https://cdn.bsgun.cn/2024/09/21/490923.webp"></p><h2 id="后果"><a href="#后果" class="headerlink" title="后果"></a>后果</h2><div class="note info flat"><p>模板整体风格为拟态化风格，删除了原模板的图片封面，评论的图片资源不会显示在邮件中（介意的自行更改一下），对评论的引用和代码块进行了一些美化处理，另外将所有内联的样式改写成类，具体请看图</p></div><h3 id="模板效果"><a href="#模板效果" class="headerlink" title="模板效果"></a>模板效果</h3><p><img src="https://cdn.bsgun.cn/2024/09/21/064193.webp" alt="博主模版"></p><p><img src="https://cdn.bsgun.cn/2024/09/21/149687.webp" alt="访客模版"></p><h3 id="模板代码"><a href="#模板代码" class="headerlink" title="模板代码"></a>模板代码</h3><div class="note warning flat"><p>底部的头像是QQ的接口可以直接替换为你的QQ也可以换成你自己的链接</p></div><h4 id="博主模版-MAIL-TEMPLATE-ADMIN"><a href="#博主模版-MAIL-TEMPLATE-ADMIN" class="headerlink" title="博主模版 MAIL_TEMPLATE_ADMIN"></a>博主模版 MAIL_TEMPLATE_ADMIN</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-left</span>: <span class="number">5px</span> solid <span class="number">#b0b0b0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    pre,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> <span class="selector-tag">p</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-content</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">1em</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">scrollbar-width</span>: none;</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">overflow</span>-style: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">word-wrap</span>: break-word</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">code</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: pre <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre<span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ff5f56</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">#ffbd2e</span>, <span class="number">40px</span> <span class="number">0</span> <span class="number">#27c93f</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.qmbox</span> <span class="selector-tag">ol</span>, <span class="selector-class">.qmbox</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-main</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">max-width</span>:<span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>:<span class="number">#e0e0e0</span> <span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>:hidden;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>:inset <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> <span class="number">#c1c6cd</span>,inset -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-content</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">gap</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#c1c6cd</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-ip</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">1em</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">scrollbar-width</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-ip</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ff5f56</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">#ffbd2e</span>, <span class="number">40px</span> <span class="number">0</span> <span class="number">#27c93f</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-center</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-hr</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">320px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-link</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-bold</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#777</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-top</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#b3b3b1</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">2.8rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-hr</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-link</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#c1c6cd</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#fff</span> <span class="meta">!important</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>你收到了来自 <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-link&quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 的评论<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-hr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span>评论者信息：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-content twikoo-ip&quot;</span>&gt;</span>昵称：$&#123;NICK&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span>IP地址：$&#123;IP&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span>邮箱：$&#123;MAIL&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span>具体网址：$&#123;POST_URL&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-link&quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 的评论内容：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-content&quot;</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span>此邮件由评论服务自动发出，直接回复无效<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-chakan&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>点击去原文查看<span class="symbol">&amp;gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-p&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://q.qlogo.cn/headimg_dl?dst_uin=153336174&amp;spec=100&quot;</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-img&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-hr&quot;</span>&gt;</span></span><br><span class="line">        © 2021-2024 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https:/www.bsgun.cn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-link&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>梦爱吃鱼·Bsgun.CN<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="访客模版-MAIL-TEMPLATE"><a href="#访客模版-MAIL-TEMPLATE" class="headerlink" title="访客模版 MAIL_TEMPLATE"></a>访客模版 MAIL_TEMPLATE</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-left</span>: <span class="number">5px</span> solid <span class="number">#b0b0b0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    pre,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> <span class="selector-tag">p</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-content</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">1em</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">scrollbar-width</span>: none;</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">overflow</span>-style: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">word-wrap</span>: break-word</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">code</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: pre <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    pre<span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ff5f56</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0</span> <span class="number">#ffbd2e</span>, <span class="number">40px</span> <span class="number">0</span> <span class="number">#27c93f</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.qmbox</span> <span class="selector-tag">ol</span>, <span class="selector-class">.qmbox</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-main</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">max-width</span>:<span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>:<span class="number">#e0e0e0</span> <span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>:hidden;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>:inset <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span> <span class="number">#c1c6cd</span>,inset -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">10px</span> <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-content</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">gap</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#c1c6cd</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-center</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-hr</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">320px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-link</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-bold</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#777</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-top</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#b3b3b1</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">2.8rem</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-hr</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-footer-link</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#c1c6cd</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#fff</span> <span class="meta">!important</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.twikoo-chakan</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#9c515b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: inset <span class="number">3px</span> <span class="number">3px</span> <span class="number">6px</span> <span class="number">#f4f4f4</span>, inset -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">6px</span> <span class="number">#dcdcdc</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>你收到了来自 <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;NICK&#125;&quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 的回复<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-hr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span>您在 <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 上发表的评论：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-content&quot;</span>&gt;</span>$&#123;PARENT_COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;NICK&#125;&quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 给您回复啦：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-content&quot;</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-bold&quot;</span>&gt;</span>此邮件由评论服务自动发出，直接回复无效<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-chakan&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>点击去原文查看<span class="symbol">&amp;gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-p&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://q.qlogo.cn/headimg_dl?dst_uin=153336174&amp;spec=100&quot;</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-img&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-hr&quot;</span>&gt;</span></span><br><span class="line">        © 2021-2024 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https:/www.bsgun.cn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;twikoo-footer-link&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>梦爱吃鱼·Bsgun.CN<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><ul><li>将修改好的邮件模版的html用美化压缩工具进行压缩，如：<a href="https://coding.tools/cn/html-minifier">HTML格式化在线工具</a></li><li>将压缩后的html代码复制到，<code>Twikoo</code>后台 - 邮件通知 的 <code>MAIL_TEMPLATE</code> 和 <code>MAIL_TEMPLATE_ADMIN</code> 对应处</li></ul><h2 id="参数释义"><a href="#参数释义" class="headerlink" title="参数释义"></a>参数释义</h2><table><thead><tr><th>参数</th><th>释义</th></tr></thead><tbody><tr><td>${SITE_URL}</td><td>网站链接</td></tr><tr><td>${SITE_NAME}</td><td>网站名字</td></tr><tr><td>${POST_URL}</td><td>文章链接</td></tr><tr><td>${PARENT_NICK}</td><td>被回复人昵称</td></tr><tr><td>${PARENT_COMMENT}</td><td>被回复人的评论内容</td></tr><tr><td>${PARENT_IMG}</td><td>被回复人头像</td></tr><tr><td>${NICK}</td><td>回复人昵称</td></tr><tr><td>${COMMENT}</td><td>回复人评论内容</td></tr><tr><td>${IMG}</td><td>回复人头像</td></tr><tr><td>${MAIL}</td><td>回复人邮件</td></tr><tr><td>${IP}</td><td>回复人 IP 地址</td></tr></tbody></table><h2 id="其它模板"><a href="#其它模板" class="headerlink" title="其它模板"></a>其它模板</h2><p>如果你对这个模板不太满意可以看一下其它博主分享的模板</p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://meuicat.com/blog/73/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://bu.dusays.com/2024/04/25/662953b6d9923.jpg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Twikoo评论回复邮件模版</div>            <div class="tag-link-sitename">爱吃肉的猫</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前因&quot;&gt;&lt;a href=&quot;#前因&quot; class=&quot;headerlink&quot; title=&quot;前因&quot;&gt;&lt;/a&gt;前因&lt;/h2&gt;&lt;p&gt;昨天摸鱼的时候想改邮件模板，结果怎么改都不满意，最后向六神索取了一份他的模板进行了一些修改。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https:</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="分享" scheme="https://blog.bsgun.cn/tags/%E5%88%86%E4%BA%AB/"/>
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="邮件模板" scheme="https://blog.bsgun.cn/tags/%E9%82%AE%E4%BB%B6%E6%A8%A1%E6%9D%BF/"/>
    
    <category term="Twikoo" scheme="https://blog.bsgun.cn/tags/Twikoo/"/>
    
  </entry>
  
  <entry>
    <title>魔改主题兼容轻量友链朋友圈</title>
    <link href="https://blog.bsgun.cn/posts/1e0a6e20/"/>
    <id>https://blog.bsgun.cn/posts/1e0a6e20/</id>
    <published>2024-09-17T15:47:20.000Z</published>
    <updated>2024-10-03T08:59:05.477Z</updated>
    
    <content type="html"><![CDATA[<h2 id="轻量朋友圈"><a href="#轻量朋友圈" class="headerlink" title="轻量朋友圈"></a>轻量朋友圈</h2><blockquote><p>开始操作前，你需要部署好轻量朋友圈</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.liushen.fun/posts/4dc716ec/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://blog.liushen.fun/info/avatar.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Friend-Circle-Lite:轻量友链朋友圈</div>            <div class="tag-link-sitename">清羽 〄 飞扬</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><blockquote><p>跟原版没什么区别，可以前往我的朋友圈页面查看</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/fcircle/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">朋友圈</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><div class="note warning flat"><p>修改前须知，改完后原版的朋友圈配置将无效，本次共修改两个文件添加一个配置项</p></div><h3 id="创建页面"><a href="#创建页面" class="headerlink" title="创建页面"></a>创建页面</h3><p>在 Hexo 博客根目录 <code>[blog]</code>下打开终端，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page fcircle</span><br></pre></td></tr></table></figure><p>打开<code>[blog]\source\fcircle\index.md</code>,添加一行<code>type: &#39;fcircle&#39;</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 朋友圈</span><br><span class="line">comments: false</span><br><span class="line">aside: false</span><br><span class="line">top<span class="emphasis">_img: false</span></span><br><span class="line"><span class="emphasis">type: &quot;fcircle&quot;</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><p>主题配置文件中开启<code>menu</code>中友链，导航栏朋友圈，注意缩进！！！</p><h3 id="替换fcircle-pug"><a href="#替换fcircle-pug" class="headerlink" title="替换fcircle.pug"></a>替换fcircle.pug</h3><p>文件目录<code>themes\anzhiyu\layout\includes\page\fcircle.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">if theme.friends_lite.enable</span><br><span class="line">  link(rel=&quot;stylesheet&quot;, href=theme.friends_lite.fclite_css_url)</span><br><span class="line">  style.</span><br><span class="line">    #random-article &#123;</span><br><span class="line">      display: none!important;</span><br><span class="line">    &#125;</span><br><span class="line">    .card:hover,</span><br><span class="line">    #random-article:hover &#123;</span><br><span class="line">      border: var(--style-border-hover)!important;</span><br><span class="line">    &#125;</span><br><span class="line">    #modal-author-name-link,</span><br><span class="line">    .modal-article .modal-article-title:hover,</span><br><span class="line">    .card-title:hover&#123;</span><br><span class="line">      color: var(--anzhiyu-theme)!important;</span><br><span class="line">    &#125;</span><br><span class="line">    .modal-article,</span><br><span class="line">    #modal-articles-container &#123;</span><br><span class="line">      border-top-color: var(--anzhiyu-theme)!important;</span><br><span class="line">      border-bottom-color: var(--anzhiyu-theme)!important;</span><br><span class="line">    &#125;</span><br><span class="line">    #load-more-btn:hover &#123;</span><br><span class="line">      background: var(--anzhiyu-theme)!important;</span><br><span class="line">    &#125;</span><br><span class="line">  .fcircle_page</span><br><span class="line">    .author-content.author-content-item.fcirclePage.single(style=`background: url($&#123;theme.friends_lite.top_background&#125;) center / cover no-repeat !important;`)</span><br><span class="line">      .card-content</span><br><span class="line">        .author-content-item-tips 朋友圈</span><br><span class="line">        span.author-content-item-title 最新文章订阅</span><br><span class="line">        .content-bottom</span><br><span class="line">          .tips= theme.friends_lite.top_tips</span><br><span class="line">        .banner-button-group</span><br><span class="line">          a.banner-button(onclick=&#x27;pjax.loadUrl(&quot;/about&quot;)&#x27;)</span><br><span class="line">            i.anzhiyufont.anzhiyu-icon-arrow-circle-right(style=&#x27;font-size: 22px; margin-right: 0.25rem&#x27;)</span><br><span class="line">            span.banner-button-text 关于本人</span><br><span class="line">    .title-h2-a</span><br><span class="line">      .title-h2-a-left</span><br><span class="line">        h2(style=&#x27;padding-top:0;margin:.6rem 0 .6rem&#x27;) 🎣 钓鱼</span><br><span class="line">        a.random-post-start(href=&#x27;javascript:fetchRandomPost();&#x27;)</span><br><span class="line">          i.anzhiyufont.anzhiyu-icon-arrow-rotate-right</span><br><span class="line">      .title-h2-a-right</span><br><span class="line">        a.random-post-all(href=&#x27;/link/&#x27;) 全部友链</span><br><span class="line">    #random-post</span><br><span class="line">    .title-h2-a</span><br><span class="line">      .title-h2-a-left</span><br><span class="line">        h2 🐟 鱼塘</span><br><span class="line">    #friend-circle-lite-root</span><br><span class="line"></span><br><span class="line">  script.</span><br><span class="line">    if (typeof UserConfig === &#x27;undefined&#x27;) &#123;</span><br><span class="line">      var UserConfig = &#123;</span><br><span class="line">        private_api_url: &#x27;#&#123;theme.friends_lite.private_api_url&#125;&#x27;,</span><br><span class="line">        page_turning_number: #&#123;theme.friends_lite.page_turning_number&#125;,</span><br><span class="line">        error_img: &#x27;#&#123;theme.friends_lite.error_img&#125;&#x27;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  script(src=theme.friends_lite.fclite_js_url)</span><br><span class="line">  script(defer data-pjax src=url_for(theme.asset.random_friends_post_js))</span><br></pre></td></tr></table></figure><h3 id="替换random-friends-post-js"><a href="#替换random-friends-post-js" class="headerlink" title="替换random_friends_post.js"></a>替换random_friends_post.js</h3><p>文件目录<code>themes\anzhiyu\source\js\anzhiyu\random_friends_post.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fdata = &#123; <span class="attr">defaultFish</span>: <span class="number">100</span>, <span class="attr">hungryFish</span>: <span class="number">100</span> &#125;;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> fdataUser !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> fdataUser) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fdataUser[key]) fdata[key] = fdataUser[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> randomPostTimes = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> randomPostWorking = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> randomPostTips = [</span><br><span class="line">  <span class="string">&quot;钓到了绝世好文！&quot;</span>,</span><br><span class="line">  <span class="string">&quot;在河边打了个喷嚏，吓跑了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你和小伙伴抢夺着&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你击败了巨龙，在巢穴中发现了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;挖掘秦始皇坟时找到了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;在路边闲逛的时候随手买了一个&quot;</span>,</span><br><span class="line">  <span class="string">&quot;从学校班主任那拿来了孩子上课偷偷看的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你的同桌无情的从你的语文书中撕下了那篇你最喜欢的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;考古学家近日发现了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;外星人降临地球学习地球文化，落地时被你塞了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;从图书馆顶层的隐秘角落里发现了闪着金光的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;徒弟修炼走火入魔，为师立刻掏出了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;在大山中唱山歌，隔壁的阿妹跑来了，带着&quot;</span>,</span><br><span class="line">  <span class="string">&quot;隔壁家的孩子数学考了满分，都是因为看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;隔壁家的孩子英语考了满分，都是因为看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;小米研发了全新一代MIX手机，据说灵感&quot;</span>,</span><br><span class="line">  <span class="string">&quot;修炼渡劫成功，还好提前看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;库克坐上了苹果CEO的宝座，因为他面试的时候看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;阿里巴巴大喊芝麻开门，映入眼帘的就是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;师傅说练武要先炼心，然后让我好生研读&quot;</span>,</span><br><span class="line">  <span class="string">&quot;科考队在南极大陆发现了被冰封的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;飞机窗户似乎被一张纸糊上了，仔细一看是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;历史上满写的仁义道德四个字，透过字缝里却全是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;十几年前的录音机似乎还能够使用，插上电发现正在播的是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;新版语文书拟增加一篇熟读并背诵的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;经调查，99%的受访者都没有背诵过&quot;</span>,</span><br><span class="line">  <span class="string">&quot;今年的高考满分作文是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;唐僧揭开了佛祖压在五指山上的&quot;</span>,</span><br><span class="line">  <span class="string">&quot;科学家发现能够解决衰老的秘密，就是每日研读&quot;</span>,</span><br><span class="line">  <span class="string">&quot;英特尔发布了全新的至强处理器，其芯片的制造原理都是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;新的iPhone产能很足，新的进货渠道是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;今年亩产突破了八千万斤，多亏了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;陆隐一统天上宗，在无数祖境高手的目光下宣读了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;黑钻风跟白钻风说道，吃了唐僧肉能长生不老，他知道是因为看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;上卫生间没带纸，直接提裤跑路也不愿意玷污手中&quot;</span>,</span><br><span class="line">  <span class="string">&quot;种下一篇文章就会产生很多很多文章，我种下了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;三十年河东，三十年河西，莫欺我没有看过&quot;</span>,</span><br><span class="line">  <span class="string">&quot;踏破铁血无觅处，得来全靠&quot;</span>,</span><br><span class="line">  <span class="string">&quot;今日双色球中了两千万，预测全靠&quot;</span>,</span><br><span class="line">  <span class="string">&quot;因为卷子上没写名字，老师罚抄&quot;</span>,</span><br><span class="line">  <span class="string">&quot;为了抗议世间的不公，割破手指写下了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;在艺术大街上被贴满了相同的纸，走近一看是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;这区区迷阵岂能难得住我？其实能走出来多亏了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;今日被一篇文章顶上了微博热搜，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你送给乞丐一个暴富秘籍，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;UZI一个走A拿下五杀，在事后采访时说他当时回想起了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;科学家解刨了第一个感染丧尸病毒的人，发现丧尸抗体存在于&quot;</span>,</span><br><span class="line">  <span class="string">&quot;如果你有梦想的话，就要努力去看&quot;</span>,</span><br><span class="line">  <span class="string">&quot;决定我们成为什么样人的，不是我们的能力，而是是否看过&quot;</span>,</span><br><span class="line">  <span class="string">&quot;有信心不一定会成功，没信心就去看&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你真正是谁并不重要，重要的是你看没看过&quot;</span>,</span><br><span class="line">  <span class="string">&quot;玄天境重要的是锻体，为师赠你此书，好好修炼去吧，这是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;上百祖境高手在天威湖大战三天三夜为了抢夺&quot;</span>,</span><br><span class="line">  <span class="string">&quot;这化仙池水乃上古真仙对后人的考校，要求熟读并背诵&quot;</span>,</span><br><span class="line">  <span class="string">&quot;庆氏三千年根基差点竟被你小子毁于一旦，能够被我拯救全是因为我看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我就是神奇宝贝大师！我这只皮卡丘可是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我就是神奇宝贝大师！我这只小火龙可是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我就是神奇宝贝大师！我这只可达鸭可是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我就是神奇宝贝大师！我这只杰尼龟可是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;上古遗迹中写道，只要习得此书，便得成功。你定睛一看，原来是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;奶奶的，玩阴的是吧，我就是双料特工代号穿山甲，&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你的背景太假了，我的就逼真多了，学到这个技术全是因为看了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我是云南的，云南怒江的，怒江芦水市，芦水市六库，六库傈僳族，傈僳族是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;我真的栓Q了，我真的会谢如果你看&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你已经习得退退退神功，接下来的心法已经被记录在&quot;</span>,</span><br><span class="line">  <span class="string">&quot;人生无常大肠包小肠，小肠包住了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你抽到了普通文章，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你收到了稀有文章，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你抽到了金色普通文章，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你抽到了金色稀有文章，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你抽到了传说文章！它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;哇！金色传说！你抽到了金色传说文章，它是&quot;</span>,</span><br><span class="line">  <span class="string">&quot;报告！侦察兵说在前往300米有一个男子在偷偷看一本书，上面赫然写着&quot;</span>,</span><br><span class="line">  <span class="string">&quot;芷莲姑娘大摆擂台，谁若是能读完此书，便可娶了她。然后从背后掏出了&quot;</span>,</span><br><span class="line">  <span class="string">&quot;请问你的梦想是什么？我的梦想是能读到&quot;</span>,</span><br><span class="line">  <span class="string">&quot;读什么才能增智慧？当然是读&quot;</span>,</span><br><span class="line">  <span class="string">&quot;纳兰嫣然掏出了退婚书，可是发现出门带错了，结果拿出了一本&quot;</span>,</span><br><span class="line">  <span class="string">&quot;你要尽全力保护你的梦想。那些嘲笑你的人，他们必定会失败，他们想把你变成和他们一样的人。如果你有梦想的话，就要努力去读&quot;</span>,</span><br><span class="line">  <span class="string">&quot;走人生的路就像爬山一样，看起来走了许多冤枉的路，崎岖的路，但终究需要读完&quot;</span>,</span><br><span class="line">  <span class="string">&quot;游戏的规则就是这么的简单，你听懂了吗？管你听没听懂，快去看&quot;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> randomPostClick = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchRandomPost</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;random-post&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (randomPostWorking) <span class="keyword">return</span>;</span><br><span class="line">  randomPostWorking = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> randomRotate = randomPostTimes * <span class="number">360</span>;</span><br><span class="line">  <span class="keyword">let</span> randomPostTipsItem = randomPostTips[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * randomPostTips.<span class="property">length</span>)];</span><br><span class="line">  <span class="keyword">let</span> randomPostLevel = <span class="title function_">getRandomPostLevel</span>(randomPostTimes);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;random-post&quot;</span>).<span class="property">innerHTML</span> = randomPostTimes &gt;= <span class="number">5</span> ?</span><br><span class="line">    <span class="string">`钓鱼中... （Lv.`</span> + randomPostTimes + <span class="string">` 当前称号：`</span> + randomPostLevel + <span class="string">`）`</span> :</span><br><span class="line">    <span class="string">`钓鱼中...`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> randomTime = randomPostTimes == <span class="number">0</span> ? <span class="number">0</span> : <span class="title function_">randomNum</span>(<span class="number">1000</span>, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;0.2&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">transitionDuration</span> = <span class="string">&quot;0.3s&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;rotate(&quot;</span> + randomRotate + <span class="string">&quot;deg)&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (randomPostClick * fdata.<span class="property">hungryFish</span> + fdata.<span class="property">defaultFish</span> &lt; randomPostTimes &amp;&amp; <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()) == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;random-post&quot;</span>).<span class="property">innerHTML</span> =</span><br><span class="line">      <span class="string">&quot;因为只钓鱼不吃鱼，过分饥饿导致本次钓鱼失败...(点击任意一篇钓鱼获得的文章即可恢复）&quot;</span>;</span><br><span class="line">    randomPostWorking = <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="title class_">UserConfig</span>.<span class="property">private_api_url</span> + <span class="string">&#x27;all.json&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">json</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> randomArticle = json.<span class="property">article_data</span>[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * json.<span class="property">article_data</span>.<span class="property">length</span>)];</span><br><span class="line">        <span class="keyword">let</span> &#123; title, link, author &#125; = randomArticle;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;random-post&quot;</span>).<span class="property">innerHTML</span> =</span><br><span class="line">            randomPostTipsItem +</span><br><span class="line">            <span class="string">`来自友链 &lt;b&gt;`</span> +</span><br><span class="line">            author +</span><br><span class="line">            <span class="string">`&lt;/b&gt; 的文章：&lt;a class=&quot;random-friends-post&quot; onclick=&quot;randomClickLink()&quot; target=&quot;_blank&quot; href=&quot;`</span> +</span><br><span class="line">            link +</span><br><span class="line">            <span class="string">`&quot; rel=&quot;external nofollow&quot;&gt;`</span> +</span><br><span class="line">            title +</span><br><span class="line">            <span class="string">`&lt;/a&gt;`</span>;</span><br><span class="line">          randomPostTimes += <span class="number">1</span>;</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;randomPostTimes&quot;</span>, randomPostTimes);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;, randomTime);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching data:&#x27;</span>, error);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;random-post&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;获取文章失败，请稍后再试。&quot;</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        randomPostWorking = <span class="literal">false</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initRandomPost</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="property">randomPostTimes</span>) &#123;</span><br><span class="line">    randomPostTimes = <span class="built_in">parseInt</span>(<span class="variable language_">localStorage</span>.<span class="property">randomPostTimes</span>);</span><br><span class="line">    randomPostClick = <span class="built_in">parseInt</span>(<span class="variable language_">localStorage</span>.<span class="property">randomPostClick</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">transitionDuration</span> = <span class="string">&quot;0.3s&quot;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.random-post-start&quot;</span>).<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;rotate(&quot;</span> + <span class="number">360</span> * randomPostTimes + <span class="string">&quot;deg)&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fetchRandomPost</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomClickLink</span>(<span class="params"></span>) &#123;</span><br><span class="line">  randomPostClick += <span class="number">1</span>;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;randomPostClick&quot;</span>, randomPostClick);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomNum</span>(<span class="params">minNum, maxNum</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (maxNum - minNum + <span class="number">1</span>) + minNum, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomPostLevel</span>(<span class="params">times</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">10000</span>) <span class="keyword">return</span> <span class="string">&quot;愿者上钩&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">1000</span>) <span class="keyword">return</span> <span class="string">&quot;俯览天下&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">100</span>) <span class="keyword">return</span> <span class="string">&quot;绝世渔夫&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">75</span>) <span class="keyword">return</span> <span class="string">&quot;钓鱼王者&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">50</span>) <span class="keyword">return</span> <span class="string">&quot;钓鱼宗师&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">20</span>) <span class="keyword">return</span> <span class="string">&quot;钓鱼专家&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (times &gt; <span class="number">5</span>) <span class="keyword">return</span> <span class="string">&quot;钓鱼高手&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;钓鱼新手&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">initRandomPost</span>();</span><br></pre></td></tr></table></figure><h3 id="添加配置项"><a href="#添加配置项" class="headerlink" title="添加配置项"></a>添加配置项</h3><p>主题配置文件中添加一段</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Lite朋友圈配置</span></span><br><span class="line"><span class="attr">friends_lite:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">fclite_css_url:</span> <span class="string">https://fc.ruom.top/main/fclite.css</span>  <span class="comment"># 轻量朋友圈的CSS</span></span><br><span class="line">  <span class="attr">fclite_js_url:</span> <span class="string">https://fc.ruom.top/main/fclite.js</span>    <span class="comment"># 轻量朋友圈的js</span></span><br><span class="line">  <span class="attr">private_api_url:</span> <span class="string">https://fc.ruom.top/</span>                <span class="comment"># 获取json的API URL</span></span><br><span class="line">  <span class="attr">page_turning_number:</span> <span class="number">20</span>                              <span class="comment"># 每页显示的文章数量</span></span><br><span class="line">  <span class="attr">error_img:</span> <span class="string">https://cdn.bsgun.cn/Hexo-static/img/error-404.avif</span>  <span class="comment"># 404图片 URL</span></span><br><span class="line">  <span class="attr">top_background:</span> <span class="string">https://cdn.bsgun.cn/Hexo-static/img/essay-bg.avif</span>  <span class="comment"># 顶部背景图片 URL</span></span><br><span class="line">  <span class="attr">top_tips:</span> <span class="string">使用</span> <span class="string">轻量友链朋友圈</span> <span class="string">订阅友链最新文章</span>        <span class="comment"># 顶部提示文本</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>请自行替换配置中内容，最后hexo三连，刷新查看效果</p></div><h2 id="不修改主题pug方案"><a href="#不修改主题pug方案" class="headerlink" title="不修改主题pug方案"></a>不修改主题pug方案</h2><p>如果你不想修改主题文件，可以无视<strong>替换fcircle.pug</strong>，直接在<code>\source\fcircle\index.md</code>中添加如下内容</p><p>当然<code>random_friends_post.js</code>还是需要替换的，具体内容按照你的配置修改即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 朋友圈</span><br><span class="line">comments: false</span><br><span class="line">aside: false</span><br><span class="line">top_img: false</span><br><span class="line">---</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#random-article</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover)<span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover)<span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#random-article</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none<span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#friend-circle-lite-root</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fc.ruom.top/main/fclite.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;author-content author-content-item fcirclePage single&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background:url(https://cdn.bsgun.cn/Hexo-static/img/essay-bg.avif) center /cover no-repeat!important&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;author-content-item-tips&quot;</span>&gt;</span>朋友圈<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;author-content-item-title&quot;</span>&gt;</span>最新文章订阅<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tips&quot;</span>&gt;</span>使用 轻量友链朋友圈 订阅友链最新文章<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner-button-group&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;banner-button&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 8px 12px;&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;pjax.loadUrl(<span class="symbol">&amp;quot;</span>/about<span class="symbol">&amp;quot;</span>)&quot;</span> <span class="attr">data-pjax-state</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;anzhiyufont anzhiyu-icon-arrow-circle-right&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:22px;margin-right:.25rem&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;banner-button-text&quot;</span>&gt;</span>关于本人<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title-h2-a&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title-h2-a-left&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;padding-top:0;margin:.6rem 0 .6rem&quot;</span>&gt;</span>🎣 钓鱼<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;random-post-start no-text-decoration&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:fetchRandomPost();&quot;</span> <span class="attr">data-pjax-state</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;transition-duration: 0.3s; transform: rotate(5400deg); opacity: 1;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;anzhiyufont anzhiyu-icon-arrow-rotate-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title-h2-a-right&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;random-post-all no-text-decoration&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/link/&quot;</span> <span class="attr">data-pjax-state</span>=<span class="string">&quot;&quot;</span>&gt;</span>全部友链<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;random-post&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title-h2-a&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title-h2-a-left&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>🐟 鱼塘<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;friend-circle-lite-root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">UserConfig</span> === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="title class_">UserConfig</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">private_api_url</span>: <span class="string">&#x27;https://fc.ruom.top/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page_turning_number</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">error_img</span>: <span class="string">&#x27;https://cdn.bsgun.cn/Hexo-static/img/error-404.avif&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/anzhiyu/random_friends_post.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fc.ruom.top/main/fclite.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><blockquote><p>如果文章内容有错误地方，欢迎下方评论</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;轻量朋友圈&quot;&gt;&lt;a href=&quot;#轻量朋友圈&quot; class=&quot;headerlink&quot; title=&quot;轻量朋友圈&quot;&gt;&lt;/a&gt;轻量朋友圈&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;开始操作前，你需要部署好轻量朋友圈&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div cals</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="博客" scheme="https://blog.bsgun.cn/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="魔改" scheme="https://blog.bsgun.cn/tags/%E9%AD%94%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>关于主题的一些魔改</title>
    <link href="https://blog.bsgun.cn/posts/20211b6/"/>
    <id>https://blog.bsgun.cn/posts/20211b6/</id>
    <published>2024-08-28T19:51:49.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<div class="note warning flat"><p>数据不备份，魔改两行泪</p></div><h2 id="我的开源工具"><a href="#我的开源工具" class="headerlink" title="我的开源工具"></a>我的开源工具</h2><h3 id="同款封面制作"><a href="#同款封面制作" class="headerlink" title="同款封面制作"></a>同款封面制作</h3><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://cover.ruom.top/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Mini - Cover</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://github.com/JLinMr/Mini-Cover">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://github.githubassets.com/assets/pinned-octocat-093da3e6fa40.svg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">开源地址</div>            <div class="tag-link-sitename">Github</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="压缩率很强的图床"><a href="#压缩率很强的图床" class="headerlink" title="压缩率很强的图床"></a>压缩率很强的图床</h3><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://dev.ruom.top/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">若梦图床</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://github.com/JLinMr/PixPro">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://github.githubassets.com/assets/pinned-octocat-093da3e6fa40.svg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">开源地址</div>            <div class="tag-link-sitename">Github</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="自定义CSS"><a href="#自定义CSS" class="headerlink" title="自定义CSS"></a>自定义CSS</h2><blockquote><p>本站样式大部分为覆盖展示，不轻易修改主题文件</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 隐藏点赞 */</span></span><br><span class="line"><span class="comment">/* 引用链接隐藏外部提示 */</span></span><br><span class="line"><span class="selector-class">.tk-action</span> <span class="selector-class">.tk-action-link</span><span class="selector-pseudo">:first-child</span>,</span><br><span class="line"><span class="selector-class">.tag-link-tips</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 手机端搜索栏样式 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>), (<span class="attribute">max-height</span>: <span class="number">580px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.search-dialog</span> &#123;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">2rem</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">5%</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">90%</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">height</span>: auto<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">10px</span><span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页文章的标签位置 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &gt; <span class="selector-class">.recent-post-info</span> &gt; <span class="selector-class">.article-meta-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">15px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 优化关于界面人生图片 */</span></span><br><span class="line"><span class="selector-tag">img</span><span class="selector-class">.author-content-img</span><span class="selector-class">.no-lightbox</span><span class="selector-class">.entered</span><span class="selector-class">.loaded</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">0</span>) <span class="built_in">brightness</span>(.<span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 轮播下面导航栏分类优化 */</span></span><br><span class="line"><span class="selector-id">#catalog-list</span>,</span><br><span class="line">anzhiyu<span class="selector-class">.barrageContent</span> &#123;</span><br><span class="line">    <span class="attribute">scrollbar-width</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 优化文章顶部分类和标签显示异常 */</span></span><br><span class="line"><span class="selector-id">#post-firstinfo</span> <span class="selector-class">.meta-firstline</span> <span class="selector-tag">span</span><span class="selector-class">.post-meta-categories</span> <span class="selector-tag">a</span><span class="selector-class">.post-meta-categories</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">107</span> <span class="number">107</span> <span class="number">107</span> / <span class="number">50%</span>)<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-id">#post-info</span> <span class="selector-id">#post-firstinfo</span> <span class="selector-class">.meta-firstline</span> <span class="selector-class">.article-meta__tags</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 优化手机端文章页面边角露底色 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.post</span> <span class="selector-class">.layout</span><span class="selector-id">#content-inner</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: transparent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 代码块的边框显示优化 */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">figure</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 手机端nav栏 */</span></span><br><span class="line"><span class="selector-id">#sidebar</span> <span class="selector-id">#sidebar-menus</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 擦亮效果 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:not</span>(<span class="selector-tag">a</span>)<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, transparent, white, transparent);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">200%</span>);</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.5s</span> linear;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:not</span>(<span class="selector-tag">a</span>)<span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">100%</span>) <span class="built_in">skewX</span>(-<span class="number">60deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Twikoo*/</span></span><br><span class="line"><span class="comment">/* 评论框背景图优化 */</span></span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.el-input__inner</span>,</span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.el-textarea__inner</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: background-position-y <span class="number">0.3s</span> ease-in-out <span class="number">0s</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.el-input__inner</span><span class="selector-pseudo">:focus</span>,</span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.el-textarea__inner</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>-<span class="attribute">y</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-input</span> <span class="selector-class">.el-textarea__inner</span> &#123;</span><br><span class="line">    -moz-<span class="attribute">background-size</span>: contain;</span><br><span class="line">    -webkit-<span class="attribute">background-size</span>: contain;</span><br><span class="line">    -moz-<span class="attribute">background-size</span>: contain;</span><br><span class="line">    <span class="attribute">background-size</span>: contain</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论回复 */</span></span><br><span class="line"><span class="selector-class">.tk-action-link</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span> <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-action-link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-theme);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论后台优化 */</span></span><br><span class="line"><span class="selector-id">#body-wrap</span><span class="selector-class">.page</span> <span class="selector-class">.el-input__inner</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffffff0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">details</span> &gt; <span class="selector-tag">summary</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: none<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="统计页面"><a href="#统计页面" class="headerlink" title="统计页面"></a>统计页面</h2><blockquote><p>效果如下，具体我已经忘记是看谁的文章了</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/charts/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">统计页面</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="第一步：添加charts-js"><a href="#第一步：添加charts-js" class="headerlink" title="第一步：添加charts.js"></a>第一步：添加charts.js</h3><p>主题目录 <code>/themes/anzhiyu/scripts/helpers</code> 下添加一个 <code>charts.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// charts.js</span></span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class="line">  <span class="keyword">const</span> post = $(<span class="string">&#x27;#posts-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> tag = $(<span class="string">&#x27;#tags-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> category = $(<span class="string">&#x27;#categories-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> htmlEncode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> || tag.<span class="property">length</span> &gt; <span class="number">0</span> || category.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#postsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (post.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class="string">&#x27;data-start&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#tagsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-length&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#categoriesChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (category.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class="string">&#x27;data-parent&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (htmlEncode) &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;#/g</span>, <span class="string">&#x27;&amp;#&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> locals</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postsChart</span> (<span class="params">startMonth</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class="string">&#x27;2020-01&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> endDate = <span class="title function_">moment</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> dayTime = <span class="number">3600</span> * <span class="number">24</span> * <span class="number">1000</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = post.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class="line">  <span class="keyword">const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var postsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;日期&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        boundaryGap: false,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthArr&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;line&#x27;,</span></span><br><span class="line"><span class="string">        smooth: true,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            width: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        showSymbol: false,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        areaStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;, &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthValueArr&#125;</span>,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    postsChart.setOption(postsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      postsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tagsChart</span> (<span class="params">len</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> tagArr = []</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">tag</span>) &#123;</span><br><span class="line">    tagArr.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: tag.<span class="property">name</span>, <span class="attr">value</span>: tag.<span class="property">length</span>, <span class="attr">path</span>: tag.<span class="property">path</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  tagArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class="property">length</span>, len) || tagArr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> tagNameArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataLength; i++) &#123;</span><br><span class="line">    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class="line">  <span class="keyword">const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var tagsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;Top <span class="subst">$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;标签&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          interval: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagNameArrJson&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;bar&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderRadius: [5, 5, 0, 0],</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        emphasis: &#123;</span></span><br><span class="line"><span class="string">          itemStyle: &#123;</span></span><br><span class="line"><span class="string">            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">              offset: 0,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              offset: 1,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class="line"><span class="string">            &#125;])</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    tagsChart.setOption(tagsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      tagsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">categoriesChart</span> (<span class="params">dataParent</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> categoryArr = []</span><br><span class="line">  <span class="keyword">let</span> categoryParentFlag = <span class="literal">false</span></span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">parent</span>) categoryParentFlag = <span class="literal">true</span></span><br><span class="line">    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: category.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">value</span>: category.<span class="property">length</span>,</span><br><span class="line">      <span class="attr">path</span>: category.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">id</span>: category.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">parentId</span>: category.<span class="property">parent</span> || <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  categoryArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">translateListToTree</span> (<span class="params">data, parent</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> tree = []</span><br><span class="line">    <span class="keyword">let</span> temp</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[index].<span class="property">parentId</span> == parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = data[index];</span><br><span class="line">        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">if</span> (temp.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          obj.<span class="property">children</span> = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class="line">          tree.<span class="title function_">push</span>(obj)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> tree</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123; <span class="keyword">return</span> category.<span class="property">name</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class="line">  <span class="keyword">const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var categoryParentFlag = <span class="subst">$&#123;categoryParentFlag&#125;</span></span></span><br><span class="line"><span class="string">    var categoriesOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      legend: &#123;</span></span><br><span class="line"><span class="string">        top: &#x27;bottom&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryNameJson&#125;</span>,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;item&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: []</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    categoriesOption.series.push(</span></span><br><span class="line"><span class="string">      categoryParentFlag ?</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        nodeClick :false,</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;sunburst&#x27;,</span></span><br><span class="line"><span class="string">        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class="line"><span class="string">        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class="line"><span class="string">        sort: &#x27;desc&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderColor: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="string">          borderWidth: 2,</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            focus: &#x27;ancestor&#x27;,</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      :</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;pie&#x27;,</span></span><br><span class="line"><span class="string">        radius: [30, 80],</span></span><br><span class="line"><span class="string">        roseType: &#x27;area&#x27;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    categoriesChart.setOption(categoriesOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      categoriesChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第二步：插入JS到Inject"><a href="#第二步：插入JS到Inject" class="headerlink" title="第二步：插入JS到Inject"></a>第二步：插入JS到Inject</h3><p> <code>_config.anzhiyu.yml</code>文件中搜 <code>Inject</code>插入到<code>bottom</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject</span></span><br><span class="line"><span class="comment"># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class="line"><span class="comment"># 插入代码到头部 &lt;/head&gt; 之前 和 底部 &lt;/body&gt; 之前</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="第三步：-新建一个统计页面"><a href="#第三步：-新建一个统计页面" class="headerlink" title="第三步： 新建一个统计页面"></a>第三步： 新建一个统计页面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page charts</span><br></pre></td></tr></table></figure><p>前往博客根目录下 <code>source/charts/index.md</code>，修改内容如下</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 统计</span><br><span class="line">type: &quot;charts&quot;</span><br><span class="line">comments: false</span><br><span class="line"><span class="section">aside: false</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 文章发布时间统计图 --&gt; &lt;!-- 2020-02是从2020年2月开始计算 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;posts-chart&quot;</span> <span class="attr">data-start</span>=<span class="string">&quot;2020-02&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 文章标签统计图 --&gt; &lt;!-- data-length=&quot;10&quot; 是显示的标签数量 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tags-chart&quot;</span> <span class="attr">data-length</span>=<span class="string">&quot;10&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 文章分类统计图 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;categories-chart&quot;</span> <span class="attr">data-parent</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="接入Umami和关于页面的修改"><a href="#接入Umami和关于页面的修改" class="headerlink" title="接入Umami和关于页面的修改"></a>接入Umami和关于页面的修改</h2><blockquote><p>之前写过文章了，直接食用</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/609bcdb9/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">接入Umami并修改关于页面</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="即刻短文的修改"><a href="#即刻短文的修改" class="headerlink" title="即刻短文的修改"></a>即刻短文的修改</h2><blockquote><p>效果如下，手机端才会显示修改后的样式</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/essay/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">即刻短文</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="第一步：修改-essay-pug"><a href="#第一步：修改-essay-pug" class="headerlink" title="第一步：修改 essay.pug"></a>第一步：修改 essay.pug</h3><p>直接覆盖 <code>themes/anzhiyu/layout/includes/page</code>目录下<code>essay.pug</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">//- essay.pug 本人不太会pug所以可能代码不太好看</span><br><span class="line">if site.data.essay</span><br><span class="line">  each i in site.data.essay</span><br><span class="line">    #essay_page</span><br><span class="line">      .author-content.author-content-item.essayPage.single(style = i.top_background ? `background: url($&#123;i.top_background&#125;) left 28% / cover no-repeat;` : &quot;&quot;)</span><br><span class="line">      .author-info</span><br><span class="line">        .msg</span><br><span class="line">          .avatar</span><br><span class="line">              a.essay-avatar(href=i.avatarLink)</span><br><span class="line">                img(src=i.avatar)</span><br><span class="line">          .eassy-name=i.name</span><br><span class="line">        .desc=i.desc</span><br><span class="line">      #bber</span><br><span class="line">        section.timeline.page-1.content</span><br><span class="line">          ul#waterfall.list</span><br><span class="line">            each item, index in i.essay_list</span><br><span class="line">              if index &lt; i.limit</span><br><span class="line">                li.bber-item</span><br><span class="line">                  .user-avatar(style = i.top_background ? `background: url($&#123;i.avatar&#125;) left 28% / cover no-repeat #ffffffad;` : &quot;&quot;)</span><br><span class="line">                  .bber-content</span><br><span class="line">                    .right</span><br><span class="line">                      .bber-name=i.name</span><br><span class="line">                      p.datacont= item.content</span><br><span class="line">                        if item.image</span><br><span class="line">                          .bber-container-img</span><br><span class="line">                            each iten, indey in item.image</span><br><span class="line">                              a.bber-content-img(href=url_for(item.image[indey]), target=&quot;_blank&quot;,  data-fancybox=&quot;gallery&quot;, data-caption=&quot;&quot;)</span><br><span class="line">                                img(src=url_for(item.image[indey]))</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                        if item.video</span><br><span class="line">                          .bber-container-img</span><br><span class="line">                            each iten, indey in item.video</span><br><span class="line">                              if (item.video[indey].includes(&#x27;player.bilibili.com&#x27;))</span><br><span class="line">                                div(style=&quot;position: relative; padding: 30% 45%;margin-top: 10px;margin-bottom: 10px;&quot;)</span><br><span class="line">                                  iframe(style=&quot;position: absolute; width: 100%; height: 100%; left: 0; top: 0;margin: 0;border-radius: 12px;border: var(--style-border);&quot; src=url_for(item.video[indey]) scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;)</span><br><span class="line">                              else</span><br><span class="line">                                a.bber-content-video(href=url_for(item.video[indey]) data-fancybox=&quot;gallery&quot;, data-caption=&quot;&quot;)</span><br><span class="line">                                  video(src=url_for(item.video[indey]))</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                            .bber-content-noimg</span><br><span class="line">                        if item.aplayer</span><br><span class="line">                          .bber-music</span><br><span class="line">                            meting-js(id=item.aplayer.id, server=item.aplayer.server, type=&quot;song&quot;, mutex=&quot;true&quot;,preload=&quot;none&quot;, theme=&quot;var(--anzhiyu-main)&quot;, data-lrctype=&quot;0&quot;, order=&quot;list&quot;)</span><br><span class="line">                      .bber-bottom</span><br><span class="line">                        .bber-info-address</span><br><span class="line">                          if item.address</span><br><span class="line">                              span=item.address</span><br><span class="line">                        .bber-info-time</span><br><span class="line">                          - var datedata = new Date(item.date).toISOString()</span><br><span class="line">                          time.datatime(datetime= item.date)= datedata</span><br><span class="line">                          .bber-info-link</span><br><span class="line">                            if item.link</span><br><span class="line">                              a.bber-content-link(title=&quot;跳转到短文指引的链接&quot;, href=url_for(item.link),  rel=&quot;external nofollow&quot;)</span><br><span class="line">                                i.anzhiyufont.anzhiyu-icon-link</span><br><span class="line">                                | 链接</span><br><span class="line">                          .bber-reply(onclick=&quot;rm.rightMenuCommentText(&quot; + `&#x27;$&#123;item.content&#125;&#x27;` + &quot;)&quot;)</span><br><span class="line">                            i.anzhiyufont.anzhiyu-icon-message</span><br><span class="line">                  hr.essay-hr</span><br><span class="line">      #bber-tips(style=&#x27;color: var(--anzhiyu-secondtext);&#x27;)</span><br><span class="line">        =&quot;- 只展示最近&quot; + i.limit + &quot;条短文 -&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="第二步：新建essay-style-css"><a href="#第二步：新建essay-style-css" class="headerlink" title="第二步：新建essay-style.css"></a>第二步：新建essay-style.css</h3><p>在博客根目录下的<code>source</code>文件夹中新建一个<code>static</code>文件夹，再新建一个<code>essay-style.css</code>，内容如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.author-info</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">flex-direction</span>: column;</span><br><span class="line"><span class="attribute">align-items</span>: flex-end;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">top</span>: -<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line"><span class="attribute">margin-right</span>: <span class="number">25px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.msg</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">flex-direction</span>: row-reverse;</span><br><span class="line"><span class="attribute">align-items</span>: flex-start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.essay-avatar</span> &#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">a</span><span class="selector-class">.essay-avatar</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#ffffffad</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.eassy-name</span> &#123;</span><br><span class="line"><span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">padding-top</span>: <span class="number">2px</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">-webkit-<span class="selector-tag">line</span>-clamp: <span class="number">1</span>;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line"><span class="attribute">word-break</span>: break-all;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="attribute">overflow</span>: hidden</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-class">.narrow-row</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">50px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-tag">div</span><span class="selector-class">.bber-content</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">flex-direction</span>: column</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line"><span class="attribute">list-style</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> &#123;</span><br><span class="line"><span class="attribute">margin-top</span>: -<span class="number">2rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hr<span class="selector-class">.essay-hr</span> &#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">25px</span> auto;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--hr-border)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.bber-container-img</span> &#123;</span><br><span class="line"><span class="attribute">justify-content</span>: flex-start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.bber-content-img</span>,<span class="selector-id">#bber</span> <span class="selector-class">.bber-content-video</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">32%</span>;</span><br><span class="line"><span class="attribute">margin-right</span>: <span class="number">1%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.bber-content</span> <span class="selector-class">.datacont</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bber-name</span>,<span class="selector-class">.user-avatar</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bber-reply</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">15px</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">26px</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">26px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">time</span><span class="selector-class">.datatime</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">13px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bber-info-link</span> &#123;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">40px</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">26px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bber-info-address</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#4e9df8</span>;</span><br><span class="line"><span class="attribute">font-size</span>: .<span class="number">7rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#bber-tips</span> &#123;</span><br><span class="line"><span class="attribute">padding-bottom</span>: <span class="number">20px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.bber-bottom</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: inline<span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span>&gt;<span class="selector-tag">section</span>&gt;<span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">div</span> <span class="selector-class">.bber-info-from</span>,<span class="selector-id">#bber</span>&gt;<span class="selector-tag">section</span>&gt;<span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">div</span> <span class="selector-class">.bber-info-time</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">26px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.bber-content-img</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">900px</span>),(<span class="attribute">max-height</span>:<span class="number">580px</span>) &#123;</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=essay]</span> <span class="selector-id">#body-wrap</span> <span class="selector-class">.layout</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span><span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=essay]</span> <span class="selector-tag">div</span><span class="selector-id">#post-comment</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">15px</span><span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=essay]</span> <span class="selector-class">.layout</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span><span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=essay]</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">55px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#essay_page</span> &#123;</span><br><span class="line"><span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line"><span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-border);</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.essay-avatar</span> &#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">60px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.essayPage</span><span class="selector-class">.single</span> &#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">16rem</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.desc</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">14px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> &#123;</span><br><span class="line"><span class="attribute">margin-top</span>: -<span class="number">3rem</span><span class="meta">!important</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line"><span class="attribute">margin</span>: auto</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-class">.bber-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"><span class="attribute">border</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#bber</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-class">.bber-item</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line"><span class="attribute">border</span>: none;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">box-shadow</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bber-name</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line"><span class="attribute">display</span>: block</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.user-avatar</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">45px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">display</span>: block</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第三步：插入CSS到Inject"><a href="#第三步：插入CSS到Inject" class="headerlink" title="第三步：插入CSS到Inject"></a>第三步：插入CSS到Inject</h3><p> <code>_config.anzhiyu.yml</code>文件中搜 <code>Inject</code>插入到<code>bottom</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject</span></span><br><span class="line"><span class="comment"># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class="line"><span class="comment"># 插入代码到头部 &lt;/head&gt; 之前 和 底部 &lt;/body&gt; 之前</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/static/essay-style.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><blockquote><p>其实本站并没有做多修改，写此文章仅为记录，方便以后升级更新</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note warning flat&quot;&gt;&lt;p&gt;数据不备份，魔改两行泪&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;我的开源工具&quot;&gt;&lt;a href=&quot;#我的开源工具&quot; class=&quot;headerlink&quot; title=&quot;我的开源工具&quot;&gt;&lt;/a&gt;我的开源工具&lt;/h2</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="博客" scheme="https://blog.bsgun.cn/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="魔改" scheme="https://blog.bsgun.cn/tags/%E9%AD%94%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>本地推送Github Actions再推送到服务器</title>
    <link href="https://blog.bsgun.cn/posts/22714023/"/>
    <id>https://blog.bsgun.cn/posts/22714023/</id>
    <published>2024-08-09T18:22:40.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-前提准备"><a href="#1-前提准备" class="headerlink" title="1.前提准备"></a>1.前提准备</h2><ul><li>服务器*1</li><li>Github账号*1</li><li>电脑*1</li><li>勤劳的小手*1&#x2F;双</li></ul><p>本教程是通过 GitHub Actions 实现持续集成和持续部署（CI&#x2F;CD），自动化生成静态文件并推送到目标仓库，目标仓库触发 Webhooks 通知服务器自动拉取最新代码部署。</p><p>建议是一个私人仓库 <code>hexo-blog</code> ，一个公开仓库 <code>JLinmr.Github.io</code></p><h2 id="2-部署到Github"><a href="#2-部署到Github" class="headerlink" title="2.部署到Github"></a>2.部署到Github</h2><p>本文不叙述这个了，直接看这个文章</p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/9642fffa/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Hexo 搭建静态博客</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="3-使用Github-Actions"><a href="#3-使用Github-Actions" class="headerlink" title="3.使用Github Actions"></a>3.使用Github Actions</h2><p>GitHub Actions 是一个持续集成和持续部署（CI&#x2F;CD）平台，可以在 GitHub 仓库中配置工作流。当有新的推送到达 GitHub 仓库时，GitHub Actions 会自动触发预定义的工作流。</p><h3 id="1-创建工作流"><a href="#1-创建工作流" class="headerlink" title="1.创建工作流"></a>1.创建工作流</h3><p>方法一：在你的 GitHub 仓库中创建一个 <code>.github/workflows</code> 目录。然后，在这个目录中创建一个新的 YAML 文件，例如 <code>main.yml</code>，填入工作流配置⬇️</p><p>方法二：在你的Github仓库界面依次点击<code>Actions</code>➡️<code>set up a workflow yourself</code>，填入工作流配置⬇️</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">部署</span> <span class="string">Hexo</span> <span class="string">到另一个仓库</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检查源仓库分支</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">ref:</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">配置</span> <span class="string">Node.js</span> <span class="string">版本</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">node-version:</span> <span class="string">&quot;20.x&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm install hexo-cli -g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">缓存</span> <span class="string">node</span> <span class="string">模块</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装依赖</span></span><br><span class="line">      <span class="attr">if:</span> <span class="string">steps.cache.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm install --save</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成静态文件</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        hexo generate</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检出目标仓库</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">repository:</span> <span class="string">JLinMr/JLinmr.github.io</span>  <span class="comment"># 目标仓库</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">target-repo</span>  <span class="comment"># 目标仓库的本地路径</span></span><br><span class="line">        <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PAT</span> <span class="string">&#125;&#125;</span>  <span class="comment"># 使用你生成的个人访问令牌</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">删除并复制到目标仓库</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        rm -rf target-repo/*</span></span><br><span class="line"><span class="string">        cp -r public/* target-repo/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">配置</span> <span class="string">Git</span> <span class="string">用户信息并推送到目标仓库</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        cd target-repo</span></span><br><span class="line"><span class="string">        git config --global user.name &quot;github-actions[bot]&quot;</span></span><br><span class="line"><span class="string">        git config --global user.email &quot;github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line"><span class="string">        git add .</span></span><br><span class="line"><span class="string">        git commit -m &quot;通过 Github Actions 部署 Hexo 构建&quot;</span></span><br><span class="line"><span class="string">        git push</span></span><br><span class="line"><span class="string"></span>      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PAT</span> <span class="string">&#125;&#125;</span>  <span class="comment"># 使用你生成的个人访问令牌</span></span><br></pre></td></tr></table></figure><p>不管是方法一还是方法二，最终的内容都是这个⬆️，根据自己的仓库信息，修改 <strong>目标仓库</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检出目标仓库</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">JLinMr/JLinmr.github.io</span>  <span class="comment"># 目标仓库</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">target-repo</span>  <span class="comment"># 目标仓库的本地路径</span></span><br><span class="line">    <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PAT</span> <span class="string">&#125;&#125;</span>  <span class="comment"># 使用你生成的个人访问令牌</span></span><br></pre></td></tr></table></figure><h3 id="2-配置访问令牌"><a href="#2-配置访问令牌" class="headerlink" title="2.配置访问令牌"></a>2.配置访问令牌</h3><p>最开始我以为同账号下是有权限的，但是试了一下没有权限推送到 <code>JLinMr/JLinmr.github.io</code> 仓库。即使使用 <code>GITHUB_TOKEN</code>，也只能访问当前仓库，而不能访问其他仓库。所以在这种情况下，选择了配置个人访问令牌来获得足够的权限</p><h4 id="1-生成访问令牌"><a href="#1-生成访问令牌" class="headerlink" title="1.生成访问令牌"></a>1.生成访问令牌</h4><ol><li>进入 <code>Settings</code></li><li>点击 <code>Developer settings</code></li><li>选择 <code>Personal access tokens</code></li><li>点击 <code>Tokens(classic)</code></li><li>点击 <code>Generate new token</code></li><li>输入令牌的描述，选择需要的权限（ <code>repo</code> 权限），然后点击 <code>Generate token</code>。</li><li>复制生成的令牌</li></ol><p><img src="https://cdn.bsgun.cn/2024/08/09/406604.webp"></p><h4 id="2-添加到-Secrets"><a href="#2-添加到-Secrets" class="headerlink" title="2.添加到 Secrets"></a>2.添加到 Secrets</h4><ol><li>进入你的 GitHub 仓库。</li><li>点击 <code>Settings</code></li><li>选择 <code>Secrets and variables</code>➡️<code>Actions</code></li><li>点击 <code>New repository secret</code></li><li>输入  <code>PAT</code>，粘贴你的个人访问令牌到 <code>Secret *</code> 字段，然后点击 <code>Add secret</code></li></ol><p><img src="https://cdn.bsgun.cn/2024/08/09/509933.webp"></p><h3 id="3-触发工作流"><a href="#3-触发工作流" class="headerlink" title="3.触发工作流"></a>3.触发工作流</h3><p>修改仓库内容触发工作流，首次可能比较慢，因为工作流配置了<code>缓存 Node.js 依赖</code></p><p><img src="https://cdn.bsgun.cn/2024/08/09/713606.webp"></p><h2 id="4-配置Webhook"><a href="#4-配置Webhook" class="headerlink" title="4.配置Webhook"></a>4.配置Webhook</h2><p>本教程使用宝塔面板进行配置<code>Webhook </code>，其他请自行测试</p><h3 id="1-下载WebHook和添加"><a href="#1-下载WebHook和添加" class="headerlink" title="1.下载WebHook和添加"></a>1.下载WebHook和添加</h3><ol><li><p>点击宝塔左侧软件商城，搜索并下载安装<code>宝塔WebHook</code></p><p><img src="https://cdn.bsgun.cn/2024/08/09/715314.webp"></p></li><li><p>点击设置➡️添加Hook，填入名称和下面配置</p></li><li><p>注意你需要，修改脚本内容为你自己的</p><p><img src="https://cdn.bsgun.cn/2024/08/09/443085.webp"></p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># 输出当前时间</span></span><br><span class="line"><span class="built_in">date</span> --<span class="built_in">date</span>=<span class="string">&#x27;0 days ago&#x27;</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;开始&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义变量</span></span><br><span class="line">branch=<span class="string">&quot;main&quot;</span></span><br><span class="line">gitPath=<span class="string">&quot;/www/wwwroot/blog.bsgun.cn/&quot;</span></span><br><span class="line">gitHttp=<span class="string">&quot;https://github.com/JLinMr/JLinmr.GitHub.io.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Web站点路径：<span class="variable">$gitPath</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数：初始化 Git 仓库</span></span><br><span class="line"><span class="function"><span class="title">init_git_repo</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;.git&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;在该目录下克隆 git&quot;</span></span><br><span class="line">        <span class="built_in">sudo</span> git <span class="built_in">clone</span> <span class="variable">$gitHttp</span> gittemp</span><br><span class="line">        <span class="built_in">sudo</span> <span class="built_in">mv</span> gittemp/.git .</span><br><span class="line">        <span class="built_in">sudo</span> <span class="built_in">rm</span> -rf gittemp</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数：拉取最新代码并设置权限</span></span><br><span class="line"><span class="function"><span class="title">pull_latest_code</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;拉取最新的项目文件&quot;</span></span><br><span class="line">    git remote add origin <span class="variable">$gitHttp</span></span><br><span class="line">    git branch --set-upstream-to=origin/<span class="variable">$branch</span> <span class="variable">$branch</span></span><br><span class="line">    <span class="built_in">sudo</span> git fetch --all</span><br><span class="line">    <span class="built_in">sudo</span> git reset --hard origin/<span class="variable">$branch</span></span><br><span class="line">    <span class="built_in">sudo</span> git pull --rebase 2&gt;&amp;1</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;设置目录权限&quot;</span></span><br><span class="line">    <span class="built_in">sudo</span> <span class="built_in">chown</span> -R www:www <span class="variable">$gitPath</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断项目路径是否存在</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$gitPath</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$gitPath</span></span><br><span class="line">    init_git_repo</span><br><span class="line">    pull_latest_code</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;该项目路径不存在&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;新建项目目录&quot;</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="variable">$gitPath</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$gitPath</span></span><br><span class="line">    init_git_repo</span><br><span class="line">    pull_latest_code</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;结束&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><h3 id="2-配置密钥"><a href="#2-配置密钥" class="headerlink" title="2.配置密钥"></a>2.配置密钥</h3><ol><li><p>点击查看密钥</p></li><li><p>复制密钥的内容和蓝色选中的内容</p></li><li><p>打开你的<code>Github</code>内公开的仓库，依次点击<code>settings</code>➡️<code>WebHooks</code>➡️<code>Add WebHook</code></p></li><li><p>按照步骤4的图片进行填写内容，然后点击<code>Add WebHook</code>（<code>Payload URL</code>填写蓝色选中内容）（Content type改成<code>Json</code>）</p></li><li><p>成功的话会显示为步骤5，第一次是<code>Ping</code>（如果开启了SSL，且打开验证你有大概率会失败）</p></li></ol><p><strong>可以直接看图片按照图片顺序配置，其他的都是默认</strong></p><p><img src="https://cdn.bsgun.cn/2024/08/09/125970.webp" alt="步骤1"></p><p><img src="https://cdn.bsgun.cn/2024/08/09/960889.webp" alt="步骤2"></p><p><img src="https://cdn.bsgun.cn/2024/08/09/159902.webp" alt="步骤3"></p><p><img src="https://cdn.bsgun.cn/2024/08/09/974159.webp" alt="步骤4"></p><p><img src="https://cdn.bsgun.cn/2024/08/09/293630.webp" alt="步骤5"></p><h3 id="3-一些问题"><a href="#3-一些问题" class="headerlink" title="3.一些问题"></a>3.一些问题</h3><p>你可能会出现的问题</p><p><img src="https://cdn.bsgun.cn/2024/09/20/876180.webp"></p><p>问题原因：Git 检测到目录的所有权存在问题，因此拒绝执行某些操作</p><p>解决方案：直接复制绿框内的指令在终端执行一下设置权限</p><h2 id="5-触发钩子"><a href="#5-触发钩子" class="headerlink" title="5.触发钩子"></a>5.触发钩子</h2><blockquote><p>在你的私人仓库内进行增，删，改，任意操作即可触发GitHub Actions，然后公开仓库触发钩子，服务器进行拉取仓库的最新代码</p></blockquote><h2 id="6-写在最后"><a href="#6-写在最后" class="headerlink" title="6.写在最后"></a>6.写在最后</h2><blockquote><p>因为写这个的时候已经完成了，我也没进行测试这一套流程(但是我就是这样成的)，如果有什么问题可以在评论区评论留言</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-前提准备&quot;&gt;&lt;a href=&quot;#1-前提准备&quot; class=&quot;headerlink&quot; title=&quot;1.前提准备&quot;&gt;&lt;/a&gt;1.前提准备&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;服务器*1&lt;/li&gt;
&lt;li&gt;Github账号*1&lt;/li&gt;
&lt;li&gt;电脑*1&lt;/li&gt;
&lt;li</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="博客" scheme="https://blog.bsgun.cn/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="Github Actions" scheme="https://blog.bsgun.cn/tags/Github-Actions/"/>
    
    <category term="webhooks" scheme="https://blog.bsgun.cn/tags/webhooks/"/>
    
  </entry>
  
  <entry>
    <title>配置Umami到about页</title>
    <link href="https://blog.bsgun.cn/posts/609bcdb9/"/>
    <id>https://blog.bsgun.cn/posts/609bcdb9/</id>
    <published>2024-07-24T18:11:59.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<div class="note success flat"><p>2024-10-02：添加CF Work 部署api方式，感谢@spark 提供的worker脚本。至此白嫖已成艺术</p></div><div class="note success flat"><p>2024-08-16：更新文章 修复Hello Word部分的动画效果和countup加载动画效果</p></div><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>昨天，51LA遭遇了DDoS攻击，导致昨天的数据全部丢失。对于一个数据一般般但还每天关注数据的人来说，这无疑接受不了。<strong>主要听说51LA投毒</strong></p><p><img src="https://cdn.bsgun.cn/2024/07/27/868406.webp"></p><h2 id="部署方式"><a href="#部署方式" class="headerlink" title="部署方式"></a>部署方式</h2><p>在寻找替代方案时，偶然发现了张洪大佬的Umami。Umami是一个开源的网站分析工具，界面简洁，功能全面。所以下面讲述本文的主角-Umami</p><h3 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h3><blockquote><p>需要服务器支持，速度较快</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.zhheo.com/p/61e9.html">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://bu.dusays.com/2022/12/28/63ac2812183aa.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Docker搭建Umami</div>            <div class="tag-link-sitename">张洪heo</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="Vercel部署"><a href="#Vercel部署" class="headerlink" title="Vercel部署"></a>Vercel部署</h3><blockquote><p>无需服务器支持，速度一般</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://thewanderingallison.github.io/posts/how_to_host_umami_on_vercel/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://thewanderingallison.github.io/images/avatar.jpg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Vercel搭建Umami</div>            <div class="tag-link-sitename">不知名大佬</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="结束了？"><a href="#结束了？" class="headerlink" title="结束了？"></a>结束了？</h2><p>我是非常支持vercel的所以就选择放在Vercel了(关键是免费)</p><p>按照教程，也是成功将Umami部署到了Vercel上。</p><p><img src="https://cdn.bsgun.cn/2024/07/27/828311.webp"></p><p>Umami的界面确实简洁美观，数据是我本地测试的</p><h2 id="修改页面"><a href="#修改页面" class="headerlink" title="修改页面"></a>修改页面</h2><div class="note warning flat"><p>前提条件，你需要进行部署API，下面方式可以任选一个适合你的</p></div><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><blockquote><p>需要服务器支持，速度较快</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.zhheo.com/p/61e9.html#%E2%80%9C%E6%88%91%E7%9A%84%E2%80%9D%E9%A1%B5%E9%9D%A2%E6%95%B0%E6%8D%AE">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://bu.dusays.com/2022/12/28/63ac2812183aa.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">部署Umami-API</div>            <div class="tag-link-sitename">张洪heo</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><blockquote><p>@spark 佬提供的方法在cf worker部署（无需服务器支持）</p></blockquote><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="/posts/d0612c0e/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">CF Worker部署Umami的API</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="开始修改"><a href="#开始修改" class="headerlink" title="开始修改"></a>开始修改</h3><p><strong>如果你都搞定了，那么修改关于页面的正文开始了</strong></p><p>在 <strong>themes&#x2F;anzhiyu&#x2F;layout&#x2F;includes&#x2F;head.pug</strong> 添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//- Umami</span><br><span class="line">if theme.Umami</span><br><span class="line">  if theme.Umami.umami_url</span><br><span class="line">    script(async defer src=`$&#123;theme.Umami.umami_url_js&#125;` data-website-id=`$&#123;theme.Umami.umami_id&#125;` data-host-url=`$&#123;theme.Umami.umami_url&#125;`)</span><br><span class="line">  else</span><br><span class="line">    script(async defer src=`$&#123;theme.Umami.umami_url_js&#125;` data-website-id=`$&#123;theme.Umami.umami_id&#125;`)</span><br></pre></td></tr></table></figure><p>然后修改 <strong>themes&#x2F;anzhiyu&#x2F;source&#x2F;css&#x2F;_page&#x2F;about.styl</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">大致在<span class="number">1255</span>行</span><br><span class="line">- <span class="keyword">if</span> (<span class="built_in">hexo-config</span>(<span class="string">&#x27;LA.enable&#x27;</span>)) &#123;</span><br><span class="line">+ <span class="keyword">if</span> (<span class="built_in">hexo-config</span>(<span class="string">&#x27;LA.enable&#x27;</span>) || <span class="built_in">hexo-config</span>(<span class="string">&#x27;Umami.enable&#x27;</span>)) &#123;</span><br></pre></td></tr></table></figure><p>接着修改 <strong>themes&#x2F;anzhiyu&#x2F;layout&#x2F;includes&#x2F;page&#x2F;about.pug</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//-  应该是91行</span><br><span class="line">       .author-content</span><br><span class="line">-        if theme.LA.enable</span><br><span class="line">+        if theme.LA.enable || theme.Umami.enable</span><br><span class="line">           - let cover = item.statistic.cover</span><br><span class="line">           .about-statistic.author-content-item(style=`background: url($&#123;cover&#125;) top / cover no-repeat;`)</span><br><span class="line">             .card-content</span><br><span class="line">               .author-content-item-tips 数据</span><br><span class="line">               span.author-content-item-title 访问统计</span><br><span class="line">               #statistic</span><br><span class="line">-              .post-tips</span><br><span class="line">-                | 统计信息来自</span><br><span class="line">-                a(href=&#x27;https://invite.51.la/1NzKqTeb?target=V6&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;) 51la网站统计</span><br><span class="line">+              if theme.LA.enable</span><br><span class="line">+                .post-tips</span><br><span class="line">+                  | 统计信息来自</span><br><span class="line">+                  a(href=&#x27;https://www.51.la/&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;) 51LA统计</span><br><span class="line">+              else if theme.Umami.enable</span><br><span class="line">+                .post-tips</span><br><span class="line">+                  | 统计信息来自</span><br><span class="line">+                  a(href=&#x27;https://um.ruom.top&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;) Umami统计</span><br><span class="line">               .banner-button-group</span><br><span class="line">                 - let link = item.statistic.link</span><br><span class="line">                 - let text = item.statistic.text</span><br></pre></td></tr></table></figure><p>继续修改 直接搜  <code>- const ck = theme.LA.ck</code> 把下面的全部替换</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line">// 复制即是正常缩进(两个字符) 需要删除本行</span><br><span class="line">    //- Umami 统计 和 51LA 统计</span><br><span class="line">    if theme.Umami &amp;&amp; theme.Umami.enable</span><br><span class="line">      script(defer).</span><br><span class="line">        (function() &#123;</span><br><span class="line">          const umamiApiUrl = &quot;#&#123;url_for(theme.Umami.umami_api)&#125;&quot;;</span><br><span class="line">          fetch(umamiApiUrl)</span><br><span class="line">            .then(res =&gt; res.json())</span><br><span class="line">            .then(data =&gt; &#123;</span><br><span class="line">              let title = &#123;</span><br><span class="line">                &quot;today_uv&quot;: &quot;今日人数&quot;,</span><br><span class="line">                &quot;today_pv&quot;: &quot;今日访问&quot;,</span><br><span class="line">                &quot;yesterday_uv&quot;: &quot;昨日人数&quot;,</span><br><span class="line">                &quot;yesterday_pv&quot;: &quot;昨日访问&quot;,</span><br><span class="line">                &quot;last_month_pv&quot;: &quot;本月访问&quot;,</span><br><span class="line">                &quot;last_year_pv&quot;: &quot;本年访问&quot;</span><br><span class="line">              &#125;;</span><br><span class="line">              let s = document.getElementById(&quot;statistic&quot;);</span><br><span class="line">              for (let key in data) &#123;</span><br><span class="line">                if (data.hasOwnProperty(key) &amp;&amp; title[key]) &#123;</span><br><span class="line">                  s.innerHTML += `&lt;div&gt;&lt;span&gt;$&#123;title[key]&#125;&lt;/span&gt;&lt;span id=&quot;$&#123;key&#125;&quot;&gt;$&#123;data[key]&#125;&lt;/span&gt;&lt;/div&gt;`;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              initCountUp(data, title);</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(error =&gt; console.error(&#x27;Error:&#x27;, error));</span><br><span class="line">        &#125;)();</span><br><span class="line">    else</span><br><span class="line">      script(defer).</span><br><span class="line">        function initAboutPage() &#123;</span><br><span class="line">          fetch(&quot;https://v6-widget.51.la/v6/#&#123;ck&#125;/quote.js&quot;)</span><br><span class="line">            .then(res =&gt; res.text())</span><br><span class="line">            .then(data =&gt; &#123;</span><br><span class="line">              let title = [&quot;最近活跃&quot;, &quot;今日人数&quot;, &quot;今日访问&quot;, &quot;昨日人数&quot;, &quot;昨日访问&quot;, &quot;本月访问&quot;, &quot;总访问量&quot;];</span><br><span class="line">              let num = data.match(/(&lt;\/span&gt;&lt;span&gt;).*?(\/span&gt;&lt;\/p&gt;)/g);</span><br><span class="line"></span><br><span class="line">              num = num.map(el =&gt; &#123;</span><br><span class="line">                let val = el.replace(/(&lt;\/span&gt;&lt;span&gt;)/g, &quot;&quot;);</span><br><span class="line">                let str = val.replace(/(&lt;\/span&gt;&lt;\/p&gt;)/g, &quot;&quot;);</span><br><span class="line">                return str;</span><br><span class="line">              &#125;);</span><br><span class="line"></span><br><span class="line">              let statisticEl = document.getElementById(&quot;statistic&quot;);</span><br><span class="line"></span><br><span class="line">              // 自定义不显示哪个或者显示哪个，如下为不显示 最近活跃访客 和 总访问量</span><br><span class="line">              let statistic = [];</span><br><span class="line">              for (let i = 0; i &lt; num.length; i++) &#123;</span><br><span class="line">                if (!statisticEl) return;</span><br><span class="line">                if (i == 0) continue;</span><br><span class="line">                statisticEl.innerHTML +=</span><br><span class="line">                  &quot;&lt;div&gt;&lt;span&gt;&quot; + title[i] + &quot;&lt;/span&gt;&lt;span id=&quot; + title[i] + &quot;&gt;&quot; + num[i] + &quot;&lt;/span&gt;&lt;/div&gt;&quot;;</span><br><span class="line">                queueMicrotask(() =&gt; &#123;</span><br><span class="line">                  statistic.push(</span><br><span class="line">                    new CountUp(title[i], 0, num[i], 0, 2, &#123;</span><br><span class="line">                      useEasing: true,</span><br><span class="line">                      useGrouping: true,</span><br><span class="line">                      separator: &quot;,&quot;,</span><br><span class="line">                      decimal: &quot;.&quot;,</span><br><span class="line">                      prefix: &quot;&quot;,</span><br><span class="line">                      suffix: &quot;&quot;,</span><br><span class="line">                    &#125;)</span><br><span class="line">                  );</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              let statisticElement = document.querySelector(&quot;.about-statistic.author-content-item&quot;);</span><br><span class="line">              function statisticUP() &#123;</span><br><span class="line">                if (!statisticElement) return;</span><br><span class="line"></span><br><span class="line">                const callback = (entries, observer) =&gt; &#123;</span><br><span class="line">                  entries.forEach(entry =&gt; &#123;</span><br><span class="line">                    if (entry.isIntersecting) &#123;</span><br><span class="line">                      for (let i = 0; i &lt; num.length; i++) &#123;</span><br><span class="line">                        if (i == 0) continue;</span><br><span class="line">                        queueMicrotask(() =&gt; &#123;</span><br><span class="line">                          statistic[i - 1].start();</span><br><span class="line">                        &#125;);</span><br><span class="line">                      &#125;</span><br><span class="line">                      observer.disconnect(); // 停止观察元素，因为不再需要触发此回调</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">                &#125;;</span><br><span class="line"></span><br><span class="line">                const options = &#123;</span><br><span class="line">                  root: null,</span><br><span class="line">                  rootMargin: &quot;0px&quot;,</span><br><span class="line">                  threshold: 0</span><br><span class="line">                &#125;;</span><br><span class="line">                const observer = new IntersectionObserver(callback, options);</span><br><span class="line">                observer.observe(statisticElement);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              statisticUP();</span><br><span class="line">              initCountUp(&#123;&#125;, &#123;&#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">          initAnimation();</span><br><span class="line">        &#125;</span><br><span class="line">        if (typeof gsap === &quot;object&quot;) &#123;</span><br><span class="line">          initAboutPage()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          getScript(&quot;!&#123;url_for(theme.asset.gsap_js)&#125;&quot;).then(initAboutPage);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    //- 初始化 countup.js</span><br><span class="line">    script(defer).</span><br><span class="line">      function initCountUp(data, title) &#123;</span><br><span class="line">        const elements = [];</span><br><span class="line"></span><br><span class="line">        for (let key in data) &#123;</span><br><span class="line">          if (data.hasOwnProperty(key) &amp;&amp; title[key]) &#123;</span><br><span class="line">            const element = document.getElementById(key);</span><br><span class="line">            if (element) &#123;</span><br><span class="line">              elements.push(&#123; id: key, value: data[key], element: element &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        const selfInfoContentYearElement = document.getElementById(&quot;selfInfo-content-year&quot;);</span><br><span class="line">        if (selfInfoContentYearElement) &#123;</span><br><span class="line">          elements.push(&#123; id: &quot;selfInfo-content-year&quot;, value: #&#123;selfInfoContentYear&#125;, element: selfInfoContentYearElement &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        const observer = new IntersectionObserver((entries) =&gt; &#123;</span><br><span class="line">          entries.forEach(entry =&gt; &#123;</span><br><span class="line">            if (entry.isIntersecting) &#123;</span><br><span class="line">              const target = elements.find(el =&gt; el.element === entry.target);</span><br><span class="line">              if (target) &#123;</span><br><span class="line">                const countUp = new CountUp(target.id, 0, target.value, 0, 2, &#123;</span><br><span class="line">                  useEasing: true,</span><br><span class="line">                  useGrouping: target.id === &quot;selfInfo-content-year&quot; ? false : true,</span><br><span class="line">                  separator: &quot;,&quot;,</span><br><span class="line">                  decimal: &quot;.&quot;,</span><br><span class="line">                  prefix: &quot;&quot;,</span><br><span class="line">                  suffix: &quot;&quot;,</span><br><span class="line">                &#125;);</span><br><span class="line">                countUp.start();</span><br><span class="line">                observer.unobserve(entry.target);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;, &#123; threshold: 0 &#125;);</span><br><span class="line"></span><br><span class="line">        elements.forEach(el =&gt; observer.observe(el.element));</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    //- 独立鼠标跟随动画</span><br><span class="line">    script(defer).</span><br><span class="line">      function initAnimation() &#123;</span><br><span class="line">        var pursuitInterval = null;</span><br><span class="line">        pursuitInterval = setInterval(function () &#123;</span><br><span class="line">          const show = document.querySelector(&quot;span[data-show]&quot;);</span><br><span class="line">          const next = show.nextElementSibling || document.querySelector(&quot;.first-tips&quot;);</span><br><span class="line">          const up = document.querySelector(&quot;span[data-up]&quot;);</span><br><span class="line"></span><br><span class="line">          if (up) &#123;</span><br><span class="line">            up.removeAttribute(&quot;data-up&quot;);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          show.removeAttribute(&quot;data-show&quot;);</span><br><span class="line">          show.setAttribute(&quot;data-up&quot;, &quot;&quot;);</span><br><span class="line"></span><br><span class="line">          next.setAttribute(&quot;data-show&quot;, &quot;&quot;);</span><br><span class="line">        &#125;, 2000);</span><br><span class="line"></span><br><span class="line">        document.addEventListener(&quot;pjax:send&quot;, function () &#123;</span><br><span class="line">          pursuitInterval &amp;&amp; clearInterval(pursuitInterval);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        var helloAboutEl = document.querySelector(&quot;.hello-about&quot;);</span><br><span class="line">        helloAboutEl.addEventListener(&quot;mousemove&quot;, evt =&gt; &#123;</span><br><span class="line">          const mouseX = evt.offsetX;</span><br><span class="line">          const mouseY = evt.offsetY;</span><br><span class="line">          gsap.set(&quot;.cursor&quot;, &#123;</span><br><span class="line">            x: mouseX,</span><br><span class="line">            y: mouseY,</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          gsap.to(&quot;.shape&quot;, &#123;</span><br><span class="line">            x: mouseX,</span><br><span class="line">            y: mouseY,</span><br><span class="line">            stagger: -0.1,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      if (typeof gsap === &quot;object&quot;) &#123;</span><br><span class="line">        initAnimation()</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        getScript(&quot;!&#123;url_for(theme.asset.gsap_js)&#125;&quot;).then(initAnimation);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>最后在主题的<strong>config.yml</strong>配置项内添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Umami</span></span><br><span class="line"><span class="attr">Umami:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">umami_url_js:</span> <span class="string">https://um.ruom.top/script.js</span> <span class="comment"># 填写 umami js地址 可以使用第三方CDN加速但需要配置下面的 umami_url</span></span><br><span class="line">  <span class="attr">umami_id:</span> <span class="string">c19add88-59e1-4fa1-a406-09e64d2845f3</span> <span class="comment"># 填写 umami 统计 ID</span></span><br><span class="line">  <span class="attr">umami_api:</span> <span class="string">https://umam-api.jlinmr.workers.dev/</span> <span class="comment"># 填写 umami API 地址</span></span><br><span class="line">  <span class="attr">umami_url:</span> <span class="comment"># https://um.ruom.top 填写 umami 服务器地址 使用 CDN 加速 Umami 静态资源后需配置此项</span></span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><div class="note warning flat"><p>数据不备份，魔改两行泪，操作本文需要一定基础。文章内外站链接不能保证其稳定性和连通性。</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note success flat&quot;&gt;&lt;p&gt;2024-10-02：添加CF Work 部署api方式，感谢@spark 提供的worker脚本。至此白嫖已成艺术&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;note success flat&quot;&gt;&lt;p&gt;2</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Umami" scheme="https://blog.bsgun.cn/tags/Umami/"/>
    
    <category term="折腾" scheme="https://blog.bsgun.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
    <category term="51LA" scheme="https://blog.bsgun.cn/tags/51LA/"/>
    
  </entry>
  
  <entry>
    <title>hexo部署到vercel和服务器多线路解析</title>
    <link href="https://blog.bsgun.cn/posts/78e9208e/"/>
    <id>https://blog.bsgun.cn/posts/78e9208e/</id>
    <published>2024-06-17T20:31:16.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、前提准备"><a href="#一、前提准备" class="headerlink" title="一、前提准备"></a>一、前提准备</h2><p><strong>阅读此文章之前，你可能需要首先阅读以下的文章才能更好的理解上下文。</strong></p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/9642fffa/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Hexo 搭建静态博客</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/37e1f95c/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Hexo 部署到服务器</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><p><strong>如果你需要购买服务器并安装宝塔面板，可以看下这个文章</strong></p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/5c8fac61/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">购买服务器并安装宝塔</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="二、Vercel是什么"><a href="#二、Vercel是什么" class="headerlink" title="二、Vercel是什么"></a>二、Vercel是什么</h2><h3 id="1-关于vercel"><a href="#1-关于vercel" class="headerlink" title="1.关于vercel"></a>1.关于vercel</h3><p>Vercel 是一个云服务平台，支持静态网站和动态网站的应用部署、预览和上线。如果你用过 GitHub Pages ，那么心里可能不会太陌生，但你也能通过 vercel 集成 GitHub 后，在 GitHub 项目进行代码推送，PR合并自动部署的目的，且你不需要考虑服务器问题。</p><h3 id="2-Vercel-优势"><a href="#2-Vercel-优势" class="headerlink" title="2.Vercel 优势"></a>2.Vercel 优势</h3><blockquote><p>随便说几条，还有很多</p></blockquote><ol><li>个人版永久免费，每个月 100G 流量（别人访问你的项目所耗费的流量），个人项目部署完全够用</li><li>因为内置构建流程，支持代码推送、PR 自动触发构建，不同分支唯一地址，方便测试。</li><li>支持本地、测试、生产三种环境部署，仅仅是命令区别，上手成本极低。</li><li>相比于GitHub Pages，国内访问Vercel的速度更快（要绑定自己的域名）</li></ol><h3 id="3-Hexo部署方式"><a href="#3-Hexo部署方式" class="headerlink" title="3.Hexo部署方式"></a>3.Hexo部署方式</h3><blockquote><p>下面讲述两种部署方式</p></blockquote><ol><li>直接导入hexo项目文件，vercel 会自动检测并为项目所用的框架设置最佳构建配置和部署配置</li><li>直接部署hexo生成的静态文件，部署速度较快，直接使用GitHub Pages的仓库文件就行</li></ol><blockquote><p>下面将使用第二种部署方式进行</p></blockquote><h2 id="三、注册Vercel和部署"><a href="#三、注册Vercel和部署" class="headerlink" title="三、注册Vercel和部署"></a>三、注册Vercel和部署</h2><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><p>注册的方式很简单，如果你有Github账号，那将会非常方便</p><p><a href="https://vercel.com/signup">注册 – Vercel</a></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0a228527f.webp"></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0a47e1ecb.webp"></p><p>跟着图片走，在弹出的窗口中点击继续</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0a7475fc6.webp"></p><p>至此我们已经注册完毕</p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>我们创建一个新项目</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0b03873cd.webp"></p><p>选择我们之前的GitHub Pages仓库</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0afb4258d.webp"></p><p>配置你的项目名字（不可以大写和另类符号），直接部署</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0b6a8ae0a.webp"></p><h3 id="添加域名"><a href="#添加域名" class="headerlink" title="添加域名"></a>添加域名</h3><blockquote><p>vercle的域名国内被墙了，所以我们需要添加自己的域名</p></blockquote><p>我们可以在首页找到我们刚刚创建的项目，点击右上角三个点，点击<code>settings</code></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0bfec346f.webp"></p><p>添加域名前我们先去解析一下(😂) 主机记录 <code>www</code>  记录类型 <code>CNAME</code>记录值推荐填写 <code> cname-china.vercel-dns.com.</code></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0ca790904.webp"></p><p>回到vercel 我们在<code>settings</code>中点击<code>Domains</code>，并添加我们的域名 （vercle的域名国内被墙了）</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0c400d898.webp"></p><p>这个我不解释了，我不需要重定向我就直接添加了</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0d823650a.webp"></p><p>添加完后会自动配置SSL证书，我们就等待就好了</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0e264b52e.webp"></p><p>完成后直接打开就可以访问了</p><h3 id="速度对比"><a href="#速度对比" class="headerlink" title="速度对比"></a>速度对比</h3><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0f8eab54c.webp" alt="Vercel"></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f0faeac8ac.webp" alt="Github Pages"></p><blockquote><p>这个速度还是不够好，因为我有备案，所以我们国内可以解析到自己的服务器上</p></blockquote><h2 id="四、分线路解析"><a href="#四、分线路解析" class="headerlink" title="四、分线路解析"></a>四、分线路解析</h2><h3 id="添加解析"><a href="#添加解析" class="headerlink" title="添加解析"></a>添加解析</h3><p>这个需要看我们的DNS域名商支持不支持，不支持就转到<a href="https://www.dnspod.cn/">DNSPOD</a>或者我用的<a href="https://www.yundun.com/">云盾</a>都可以</p><p>以云盾为演示找到我们的域名解析控制台</p><p>直接添加一条 A 解析 主机记录<code>www</code>记录值<code>服务器ip</code>，线路类型选择<code>中国大陆</code></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f122aafd4c.webp"></p><p>解析完后我们接着去看看速度，可以看到IP多了一条，速度也是非常快了，基本全绿了</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666f1269bd9ae.webp"></p><h2 id="五、部署CDN保护源站"><a href="#五、部署CDN保护源站" class="headerlink" title="五、部署CDN保护源站"></a>五、部署CDN保护源站</h2><p>我们也可以给我们的服务器套上CDN防护，避免被人打我们的服务器IP，还能隐藏源站</p><p>推荐一下兄弟站的自建CDN  （公益项目，免费也能用）</p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://koxiuqiu.cn/2024/04/06/qiudn">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/2024/06/27/666f14be62f36.webp)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">为博客站点提供免费CDN</div>            <div class="tag-link-sitename">KLCDM</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="六、结束"><a href="#六、结束" class="headerlink" title="六、结束"></a>六、结束</h2><blockquote><p>以上内容仅记录所用，不保证后续还能打开</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、前提准备&quot;&gt;&lt;a href=&quot;#一、前提准备&quot; class=&quot;headerlink&quot; title=&quot;一、前提准备&quot;&gt;&lt;/a&gt;一、前提准备&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;阅读此文章之前，你可能需要首先阅读以下的文章才能更好的理解上下文。&lt;/strong&gt;&lt;/p&gt;</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="雨云服务器" scheme="https://blog.bsgun.cn/tags/%E9%9B%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="vercel" scheme="https://blog.bsgun.cn/tags/vercel/"/>
    
  </entry>
  
  <entry>
    <title>Hexo部署到服务器</title>
    <link href="https://blog.bsgun.cn/posts/37e1f95c/"/>
    <id>https://blog.bsgun.cn/posts/37e1f95c/</id>
    <published>2024-06-16T20:51:06.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<p><strong>本来Hexo是部署在GitHub上的，无奈访问太慢了，并且有些地区打不开，我这个强迫症就忍不了这种情况。就有了以下开端</strong></p><h2 id="一、前提准备"><a href="#一、前提准备" class="headerlink" title="一、前提准备"></a>一、前提准备</h2><p><strong>阅读此文章之前，你可能需要首先阅读以下的文章才能更好的理解上下文。</strong></p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/9642fffa/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">Hexo 搭建静态博客</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><p><strong>如果你需要购买服务器并安装宝塔面板，可以看下这个文章</strong></p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://blog.bsgun.cn/posts/5c8fac61/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://cdn.bsgun.cn/Hexo-static/img/favicon.ico)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">购买服务器并安装宝塔</div>            <div class="tag-link-sitename">梦爱吃鱼</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="添加站点"><a href="#添加站点" class="headerlink" title="添加站点"></a>添加站点</h3><p>在宝塔面板-&gt;网站-&gt;添加站点，填写域名，版本设置纯静态。记住网站资源目录 <code>/www/wwwroot/ruom.top</code></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666efb440b121.webp"></p><h2 id="二、Git仓库搭建"><a href="#二、Git仓库搭建" class="headerlink" title="二、Git仓库搭建"></a>二、Git仓库搭建</h2><p>之前推hexo的静态文件都是推到GitHub的仓库，现在服务器也是一样，需要仓库来保存</p><p><strong>下面操作需要有Linux基础知识驱动</strong></p><h3 id="1-添加一个用户git"><a href="#1-添加一个用户git" class="headerlink" title="1.添加一个用户git"></a>1.添加一个用户git</h3><p>在服务器端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">adduser git   <span class="comment">#添加git用户</span></span><br><span class="line"><span class="built_in">chmod</span> 740 /etc/sudoers  <span class="comment">#改变sudoers文件的权限为文件所有者可写</span></span><br><span class="line">vim /etc/sudoers</span><br><span class="line"><span class="comment">#在root ALL=(ALL) ALL 下方添加一行</span></span><br><span class="line">git ALL=(ALL) ALL</span><br><span class="line"><span class="built_in">chmod</span> 400 /etc/sudoers  <span class="comment">#将其权限修改为文件所有者可读</span></span><br></pre></td></tr></table></figure><h3 id="2-给git用户添加ssh密钥"><a href="#2-给git用户添加ssh密钥" class="headerlink" title="2.给git用户添加ssh密钥"></a>2.给git用户添加ssh密钥</h3><p>这一步是为了建立主机与服务器连接，使其不需要密码也能登陆</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在本地打开powershell 生成密匙 如已有密匙可跳过这一步 部署过hexo的应该都有</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;ruom.top&quot;</span></span><br><span class="line"><span class="comment"># -t 指定密钥类型，默认是 rsa ，可以省略</span></span><br><span class="line"><span class="comment"># -C 用于识别这个密钥的注释，可以输入任何内容</span></span><br><span class="line"><span class="comment"># -f 指定密钥文件存储文件名，默认id_rsa</span></span><br><span class="line"><span class="comment">## 这个生成的文件在 C:\Users\用户名\.ssh</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.bsgun.cn/2024/06/27/666f02525bba3.webp"></p><p>复制公匙id_rsa.pub内容到服务器&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keys，关闭终端</p><p>使用<code>ssh git@server</code>重新登录服务器，测试是否能不要密码登录到git用户，如出现Permission denied的问题可查看服务端是否开启ssh的密钥登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在服务器端</span></span><br><span class="line">su git  <span class="comment">#切换到git用户</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.ssh</span><br><span class="line"><span class="built_in">touch</span> ~/.ssh/authorized_keys <span class="comment">#创建authorized_keys文件</span></span><br><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys  <span class="comment">#为authorized_keys文件赋予文件所有者可读可写的权限</span></span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh  <span class="comment">#为.ssh文件夹赋予文件夹所有者可读可写可执行的权限</span></span><br></pre></td></tr></table></figure><h3 id="3-创建Git仓库"><a href="#3-创建Git仓库" class="headerlink" title="3.创建Git仓库"></a>3.创建Git仓库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /home/git/repos    <span class="comment">#新建目录，这是git仓库的位置</span></span><br><span class="line"><span class="built_in">cd</span> /home/git/repos</span><br><span class="line">git init --bare blog.git <span class="comment">#初始化一个名叫blog的仓库</span></span><br></pre></td></tr></table></figure><h3 id="4-配置钩子实现自动部署"><a href="#4-配置钩子实现自动部署" class="headerlink" title="4.配置钩子实现自动部署"></a>4.配置钩子实现自动部署</h3><p>找到 <code>/home/git/repos/blog.git/hooks/post-update.sample</code> 改名<code>post-update</code>，内容改为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">git --work-tree=/www/wwwroot/ruom.top --git-dir=/home/git/repos/blog.git checkout -f</span><br></pre></td></tr></table></figure><p>然后给权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog.git/hooks/</span><br><span class="line"><span class="built_in">chmod</span> +x post-update  <span class="comment">#赋予其可执行权限</span></span><br><span class="line"><span class="built_in">chown</span> -R git:git /home/git/repos/ <span class="comment">#仓库所有者改为git</span></span><br><span class="line"><span class="built_in">chown</span> -R git:git /www/wwwroot/ruom.top/ <span class="comment">#站点文件夹所有者改为git</span></span><br></pre></td></tr></table></figure><h3 id="5-测试Git仓库是否可用"><a href="#5-测试Git仓库是否可用" class="headerlink" title="5.测试Git仓库是否可用"></a>5.测试Git仓库是否可用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在本地端，如果能将仓库拉下来，说明Git仓库搭建成功</span></span><br><span class="line">git <span class="built_in">clone</span> git@server_ip:/home/git/repos/blog.git</span><br></pre></td></tr></table></figure><h2 id="三、配置和测试"><a href="#三、配置和测试" class="headerlink" title="三、配置和测试"></a>三、配置和测试</h2><h3 id="1-配置"><a href="#1-配置" class="headerlink" title="1.配置"></a>1.配置</h3><p>修改本地Hexo博客文件夹中的<code>_config.yml</code>文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@server_ip:/home/git/repos/blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h3 id="2-测试"><a href="#2-测试" class="headerlink" title="2.测试"></a>2.测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  <span class="comment">#清除缓存</span></span><br><span class="line">hexo generate <span class="comment">#生成静态页面</span></span><br><span class="line">hexo delopy  <span class="comment">#将本地静态页面目录部署到云服务器</span></span><br></pre></td></tr></table></figure><p>也可以在package.json 中添加 npm 脚本，这样就可以直接<code>npm run d</code>一下执行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;:</span> &#123;</span><br><span class="line">    <span class="attr">&quot;build&quot;:</span> <span class="string">&quot;hexo generate&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;clean&quot;:</span> <span class="string">&quot;hexo clean&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;deploy&quot;:</span> <span class="string">&quot;hexo deploy&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;server&quot;:</span> <span class="string">&quot;hexo server&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;d&quot;:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy&quot;</span></span><br><span class="line">  &#125;<span class="string">,</span></span><br></pre></td></tr></table></figure><p>然后访问刚开始绑定的网站域名看看是否成功 （记得解析哦）</p><blockquote><p>以上内容仅记录所用，不保证后续还能打开</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;本来Hexo是部署在GitHub上的，无奈访问太慢了，并且有些地区打不开，我这个强迫症就忍不了这种情况。就有了以下开端&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;一、前提准备&quot;&gt;&lt;a href=&quot;#一、前提准备&quot; class=&quot;headerlink&quot; tit</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="宝塔" scheme="https://blog.bsgun.cn/tags/%E5%AE%9D%E5%A1%94/"/>
    
    <category term="雨云服务器" scheme="https://blog.bsgun.cn/tags/%E9%9B%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建静态博客</title>
    <link href="https://blog.bsgun.cn/posts/9642fffa/"/>
    <id>https://blog.bsgun.cn/posts/9642fffa/</id>
    <published>2024-06-16T20:31:16.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-什么是Hexo和静态博客"><a href="#1-什么是Hexo和静态博客" class="headerlink" title="1.什么是Hexo和静态博客"></a>1.什么是Hexo和静态博客</h2><p><a href="https://hexo.io/">Hexo</a> 是一个极速、简单且强大的静态博客架构。它使用 Node.js 作为构建引擎，上百个文件在几秒钟内便可构建完成；而且拥有着丰富的插件库，因开源而显得生机勃勃，可扩展性很好；最重要的，它支持 <a href="http://kchen.cc/2015/10/05/Markdown-Manual/#Markdown-%E7%AE%80%E6%98%8E%E8%AF%AD%E6%B3%95">Markdown</a> 作为书写语言，极大地方便了博客的撰写。</p><p>静态博客：是指<strong>没有后端数据库</strong>的博客，所有文章都是以<strong>文件</strong>的形式存储，是一种<strong>纯前端</strong>的博客框架。</p><h2 id="2-配置环境"><a href="#2-配置环境" class="headerlink" title="2.配置环境"></a>2.配置环境</h2><p>安装Node.js和Git</p><ul><li><a href="https://nodejs.org/zh-cn/">Node.js</a></li><li><a href="https://git-scm.com/">Git</a></li></ul><p>查看是否安装成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">git -version</span><br></pre></td></tr></table></figure><p>环境没问题后安装Node.js 淘宝镜像加速器 （cnpm）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm -v        #检查是否安装成功</span><br></pre></td></tr></table></figure><h2 id="3-安装Hexo"><a href="#3-安装Hexo" class="headerlink" title="3.安装Hexo"></a>3.安装Hexo</h2><p>环境配置好后就可以安装Hexo了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br><span class="line">hexo -v        #查看是否安装成功</span><br></pre></td></tr></table></figure><p>安装完成后，创建到一个想用来存放博客的目录<code>hexo</code>，然后开始新建博客</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd hexo</span><br><span class="line">hexo init</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在运行<code>hexo s</code>后会看到<code>Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</code></p><p>在浏览器里打开<a href="http://localhost:4000/">http://localhost:4000</a> 就可看到一个新建的Hexo博客</p><h2 id="4-写博客文章"><a href="#4-写博客文章" class="headerlink" title="4.写博客文章"></a>4.写博客文章</h2><p>在博客目录下来新建一个博客</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;博客文章名&quot;</span><br></pre></td></tr></table></figure><p>新建的博客会被保存到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;blog-dir&gt;/source/_posts/博客文章名.md</span><br></pre></td></tr></table></figure><p>之后我们可以用编辑器打开编辑，保存后<code>hexo s</code>访问 <a href="http://localhost:4000/">http://localhost:4000</a> 就可以看到这篇文章已经发布到博客中了</p><h2 id="5-创建SSH到Github"><a href="#5-创建SSH到Github" class="headerlink" title="5.创建SSH到Github"></a>5.创建SSH到Github</h2><ul><li>打开终端在终端中设置</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的 GitHub 用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的 GitHub 邮箱&quot;</span></span><br></pre></td></tr></table></figure><ul><li>创建 SSH 密匙</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的 GitHub 邮箱&quot;</span></span><br></pre></td></tr></table></figure><ul><li>一直回车，然后我们到 <code>C:\Users\ 用户名 \.ssh</code> 目录（勾选显示 “隐藏的项目”）</li></ul><p><img src="https://cdn.bsgun.cn/2024/08/30/675561.webp"></p><ul><li><p>打开<code>id_rsa.pub</code>并复制里面的内容</p></li><li><p>登录Github账号，并进入到<a href="https://github.com/settings/ssh/new">https://github.com/settings/ssh/new</a>  ，将复制的内容粘贴到<code>key</code>框内保存</p></li></ul><p><img src="https://cdn.bsgun.cn/2024/08/30/567059.webp"></p><ul><li>验证与Github的连通性，在终端内输入</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><ul><li>如果出现 “Are you sure……”，输入 yes 回车确认，出现下面内容提示即连接成功</li></ul><p><img src="https://cdn.bsgun.cn/2024/08/30/267076.webp"></p><h2 id="6-部署博客到GitHub"><a href="#6-部署博客到GitHub" class="headerlink" title="6.部署博客到GitHub"></a>6.部署博客到GitHub</h2><p>现在的页面我们只能在本地访问，这当然不够，由于Hexo 是基于静态页面的博客系统，意味着对服务器的要求可以非常的低，所以我们可以将其部署到Github上去</p><ul><li>首先创建一个名称为 <code>用户名.github.io</code> 的仓库来托管网页</li><li>然后到命令行安装git部署插件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save hexo-deployer-git     #在blog目录下安装git部署插件</span><br></pre></td></tr></table></figure><ul><li><p>在hexoblog目录下找到_config.yml，用编辑器打开，在最下面找到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">type: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line"> #将其设置为如下，注意每个冒号后面有一个空格</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repo: https://github.com/JLinmr/JLinmr.github.io.git        #你的GitHub仓库地址</span><br><span class="line">branch: main</span><br></pre></td></tr></table></figure></li><li><p>命令行运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g        #生成静态文件</span><br><span class="line">hexo d        #部署到GitHub</span><br></pre></td></tr></table></figure></li><li><p>刷新GitHub仓库可以看到生成了很多文件，此时访问<code>用户名.github.io</code>即可看到创建的博客</p></li></ul><h2 id="7-绑定域名"><a href="#7-绑定域名" class="headerlink" title="7.绑定域名"></a>7.绑定域名</h2><p>如果我们有自己的域名，想要解析到我们 刚刚创建的网站，需要添加记录</p><p>CNAME 类型 解析到你的<code>用户名.github.io</code>  主机记录@ （看个人需求）</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ef5fd977b9.webp"></p><p>在你的博客文件\source中新建CNAME记事本，不要有后缀，内容输入域名即可</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ef5a96cef1.webp"></p><p>然后重新</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo c        #清理静态文件</span><br><span class="line">hexo g        #生成静态文件</span><br><span class="line">hexo d        #部署到GitHub</span><br></pre></td></tr></table></figure><p>进入github博客仓库，在setting-&gt;options的最下面的github pages中输入自己域名并保存</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ef561b67ce.webp"></p><p>现在就可以用自己的域名访问刚刚建立的网站了</p><h2 id="8-结束"><a href="#8-结束" class="headerlink" title="8.结束"></a>8.结束</h2><blockquote><p>以上内容仅记录所用，不保证后续还能打开</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-什么是Hexo和静态博客&quot;&gt;&lt;a href=&quot;#1-什么是Hexo和静态博客&quot; class=&quot;headerlink&quot; title=&quot;1.什么是Hexo和静态博客&quot;&gt;&lt;/a&gt;1.什么是Hexo和静态博客&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://hexo.</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo" scheme="https://blog.bsgun.cn/tags/hexo/"/>
    
    <category term="博客" scheme="https://blog.bsgun.cn/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>购买服务器并安装宝塔</title>
    <link href="https://blog.bsgun.cn/posts/5c8fac61/"/>
    <id>https://blog.bsgun.cn/posts/5c8fac61/</id>
    <published>2024-06-16T19:49:13.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h2><p><strong>首先需要一台云服务器，要有公网IP的，推荐雨云的：</strong></p><p><strong>雨云优惠注册地址：<a href="https://www.rainyun.com/Lin_">https://www.rainyun.com/Lin_</a></strong></p><p><strong>优惠码：Lin</strong></p><p><strong>使用优惠码注册后绑定微信可获得5折优惠券</strong></p><p>注册完账号后进到雨云控制台，<strong>云服务器</strong>入口可以在后台的 <strong>总览</strong> 和 <strong>云产品</strong> 部分找到：</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed33613cbf.webp"></p><p>点击<strong>购买云服务器</strong>，接着选择服务器区域，国内用户有备案的建议选择内地机房，因为延迟低，比如宿迁和十堰，其中推荐十堰，因为 IP 便宜，如果预算充足选择宿迁更好。</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed4a04e607.webp"></p><p>配置地区按需求购买，没有备案的买国外的服务器就好了。</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed37e3cf5c.webp"></p><p>系统这里我推荐选择宝塔面板，简单易上手，后续也会用到它，而且已经为我们预装了LNMP，能为我们节省大量时间</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed439be66c.webp"></p><p>购买后即可在我的云服务器这里看到你买的云服务器，点击管理。</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed4eb89585.webp"></p><h2 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h2><p>下载安装并打开 <code>ssh</code> 客户端软件，<code>ssh</code> 客户端软件推荐 <code>putty</code> 或 <code>Xshell</code>。</p><p>我这里用 <code>Xshell</code>，在 SSH 客户端中输入你的服务器的 IP 地址（雨云控制台获取），还有 SSH 端口（一般默认是 22），然后点击连接。</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed692128d2.webp"></p><p>接受并保存（以后连接不再弹出）输入用户名<code>root</code> 输入密码，上方图片框选的内容就是，最后连接成功</p><div class="gallery">  <div class="fj-gallery page_img_lazyload lazyload btn_album_detail_lazyload data" data-rowHeight="220" data-limit="2">    <span class="gallery-data">[{"url":"https://cdn.bsgun.cn/2024/06/27/666ed7c597ece.webp","alt":""},{"url":"https://cdn.bsgun.cn/2024/06/27/666ed7791d8fc.webp","alt":""},{"url":"https://cdn.bsgun.cn/2024/06/27/666ed7d311dcf.webp","alt":""}]</span>  </div><button class="gallery-load-more" style="opacity:0">  <span>加载更多</span>  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>  </button></div><p>输入<code>bt 14</code>命令 获取到我们的宝塔登录信息，因为不显示密码所以我们重置一下密码继续输入<code>bt 5</code></p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed959a7321.webp"></p><p>去浏览器打开外网地址，输入账号密码</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666ed99549141.webp"></p><p>需要注册个宝塔的账号，注册完登录即可</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666edcdd0a949.webp"></p><h2 id="其他服务器商"><a href="#其他服务器商" class="headerlink" title="其他服务器商"></a>其他服务器商</h2><p>当然我们也可以选择其他的服务器商</p><p>使用方法大同小异，选择合适的配置并安装宝塔面板，这是官网的安装脚本在下面的连接点击直达</p><p><img src="https://cdn.bsgun.cn/2024/06/27/666edbdca01aa.webp"></p><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://www.bt.cn/new/download.html">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://www.bt.cn/static/new/images/logo.svg)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">宝塔面板下载，免费全能的服务器运维软件</div>            <div class="tag-link-sitename">宝塔</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h2 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h2><blockquote><p>有什么问题可以留言或者联系我提供帮助</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;购买服务器&quot;&gt;&lt;a href=&quot;#购买服务器&quot; class=&quot;headerlink&quot; title=&quot;购买服务器&quot;&gt;&lt;/a&gt;购买服务器&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;首先需要一台云服务器，要有公网IP的，推荐雨云的：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="宝塔" scheme="https://blog.bsgun.cn/tags/%E5%AE%9D%E5%A1%94/"/>
    
    <category term="雨云服务器" scheme="https://blog.bsgun.cn/tags/%E9%9B%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>雨云服务器搭建内网穿透服务器教程，NPS搭建和使用教程</title>
    <link href="https://blog.bsgun.cn/posts/37257/"/>
    <id>https://blog.bsgun.cn/posts/37257/</id>
    <published>2023-11-21T20:22:02.000Z</published>
    <updated>2024-10-03T08:59:05.477Z</updated>
    
    <content type="html"><![CDATA[<p>在这个高度互联的时代，我们越来越依赖互联网来实现工作和生活的各种需求。然而，随着一些省份逐步收回家庭用户的公网IPv4地址（目前国内大部分地方都是多个用户共用一个公网IPv4地址），我们无法直接通过公网访问家里的设备和服务，这给我们带来了一定的困扰。但是别担心，内网穿透技术就是解决这个问题的绝佳方案。</p><p>在本教程中，我们将介绍一款名为NPS的轻量级内网穿透工具，它不仅支持多平台，包括X86、ARM和MIPS，而且还提供了便捷的WEB管理界面，使得搭建和配置内网穿透服务器变得简单而直观。</p><h2 id="内网穿透简介"><a href="#内网穿透简介" class="headerlink" title="内网穿透简介"></a>内网穿透简介</h2><p>内网穿透是一种将内部网络的服务暴露到公网的技术，使得外部用户可以通过互联网访问内部网络中的服务。它允许在没有公网 IP 地址或端口转发的情况下，通过一个中间代理服务器将内部网络的服务暴露给外部用户。</p><p>内网穿透通常用于以下场景：</p><ol><li>远程访问：当内部网络中的设备需要被外部用户远程访问时，可以使用内网穿透技术。例如，通过内网穿透可以将家庭网络中的个人电脑、NAS（网络附加存储）等设备暴露给外部用户，实现远程访问和控制。</li><li>远程办公：在企业中，员工可能需要从外部网络访问内部网络中的办公应用、文件共享等资源。内网穿透可以提供一种安全的方式，让员工能够远程访问这些资源，实现远程办公。</li><li>数据备份和同步：内网穿透可以用于将内部网络中的文件、数据库等数据备份到外部云存储服务或同步到其他设备。这样即使内部网络出现故障，数据仍然可以从外部网络进行恢复和同步。</li><li>搭建网站和应用程序：内网穿透可以用于将内部网络中的网站、应用程序等服务暴露给外部用户。通过内网穿透，开发者可以在本地搭建并测试自己的网站或应用程序，而无需购买公网 IP 地址或使用其他复杂的端口转发设置。</li></ol><p>常见的内网穿透工具包括 ngrok、frp、nps 等。这些工具提供了简单易用的界面和配置选项，可以帮助用户快速搭建内网穿透环境。然而，需要注意的是，在使用内网穿透技术时，安全性是非常重要的考虑因素，应该采取适当的安全措施来保护内部网络的安全。</p><h2 id="NPS介绍"><a href="#NPS介绍" class="headerlink" title="NPS介绍"></a>NPS介绍</h2><p>nps是一款轻量级、高性能、功能强大的<strong>内网穿透</strong>代理服务器。目前支持<strong>TCP、UDP流量转发</strong>，可支持任何<strong>tcp、udp</strong>上层协议（访问内网网站、本地支付接口调试、ssh访问、远程桌面，内网dns解析、游戏私服、我的世界服务器 等等……），此外还<strong>支持内网http代理、内网socks5代理</strong>、<strong>p2p等</strong>，同时支持snappy压缩、站点保护、加密传输、多路复用、header修改等。支持web图形化管理，集成多用户模式。</p><p>案例：</p><ol><li>做微信公众号开发、小程序开发等—-&gt; 域名代理模式</li><li>想在外网通过ssh连接内网的机器，做云服务器到内网服务器端口的映射，—-&gt; tcp代理模式</li><li>在非内网环境下使用内网dns，或者需要通过udp访问内网机器等—-&gt; udp代理模式</li><li>在外网使用HTTP代理访问内网站点—-&gt; http代理模式</li><li>搭建一个内网穿透ss，在外网如同使用内网vpn一样访问内网资源或者设备—-&gt; socks5代理模式</li></ol><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://github.com/yisier/nps">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://gcore.jsdelivr.net/gh/xaoxuu/cdn-assets@master/logo/256/safari.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">NPS项目Github地址</div>            <div class="tag-link-sitename">Github</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><div calss='anzhiyu-tag-link'><a class="tag-Link" target="_blank" href="https://ehang-io.github.io/nps/#/">    <div class="tag-link-tips">引用站外地址</div>    <div class="tag-link-bottom">        <div class="tag-link-left" style="background-image: url(https://gcore.jsdelivr.net/gh/xaoxuu/cdn-assets@master/logo/256/safari.png)">          <i class="anzhiyufont anzhiyu-icon-link" style="display: none"></i>        </div>        <div class="tag-link-right">            <div class="tag-link-title">NPS官方中文文档</div>            <div class="tag-link-sitename">Github</div>        </div>        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>    </div>    </a></div><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>协议支持全面，兼容几乎所有常用协议，例如tcp、udp、http(s)、socks5、p2p、http代理…</li><li>全平台兼容(linux、windows、macos、群辉等)，支持一键安装为系统服务</li><li>控制全面，同时支持服务端和客户端控制</li><li>https集成，支持将后端代理和web服务转成https，同时支持多证书</li><li>操作简单，只需简单的配置即可在web ui上完成其余操作</li><li>展示信息全面，流量、系统信息、即时带宽、客户端版本等</li><li>扩展功能强大，该有的都有了（缓存、压缩、加密、流量限制、带宽限制、端口复用等等）</li><li>域名解析具备自定义header、404页面配置、host修改、站点保护、URL路由、泛解析等功能</li><li>服务端支持多用户和用户注册功能</li></ul><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p><strong>首先需要一台云服务器，要有公网IP的，推荐雨云的：</strong></p><p><strong>雨云优惠注册地址：<a href="https://www.rainyun.com/Lin_">https://www.rainyun.com/Lin_</a></strong></p><p><strong>优惠码：Lin</strong></p><p><strong>使用优惠码注册后绑定微信可获得5折优惠券</strong></p><p>雨云账号注册&amp;云服务器购买和使用教程：</p><iframe src="//player.bilibili.com/player.html?aid=449635652&amp;bvid=BV1Kj411x7G6&amp;cid=1300615117&amp;p=1&autoplay=0" scrolling="no"   border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 100%;min-height: 350px;"> </iframe><p>注册完账号后进到雨云控制台，<strong>云服务器</strong>入口可以在后台的 <strong>总览</strong> 和 <strong>云产品</strong> 部分找到：<img src="https://tc.zeruns.tech/images/2023/11/15/20231114220844_97e4c0aea639203fa5970e521bb9aa14.png" alt="img"></p><p>点击<strong>购买云服务器</strong>，接着选择服务器区域，国内用户建议选择内地机房，因为延迟低，比如宿迁和十堰，其中推荐十堰，因为IP便宜，如果预算充足选择宿迁更好。<img src="https://tc.zeruns.tech/images/2023/11/15/20231114222311_811e2ff33e8d5b7e5955ba32d1082667.png" alt="img"></p><p>配置选择2核2G一般够用了。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114222533312_7868bb8cec0bc5bd5fdc641c09d4d161.png" alt="img"></p><p>系统选择<strong>Debian12</strong>，预安装APP选择<strong>Docker环境</strong>（选了这个可以跳过下面安装Docker的步奏）。如果所选区域没有Debian12就选择Debian11，如果没有预安装Docker就需要执行下面教程安装Docker那步<img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114222751234_bc7fbc8bad1f3670433baac7f736bf96.png" alt="img"></p><p>都选好后就可以点击立即购买了，也可以选择1元试用1天。</p><p>购买后即可在我的云服务器这里看到你买的云服务器，点击<strong>管理</strong>。<img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114223339447_3927b766ebead0835bf0a3ce47481bbe.png" alt="img"></p><p>接着就可以看到云服务器的信息了，在这里重装&#x2F;切换系统，可以升级配置。<img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114223526703_50554c5331f7143f1601e71870821136.png" alt="img"></p><h2 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h2><p>下载安装并打开<code>ssh</code>客户端软件，<code>ssh</code>客户端软件推荐<code>putty</code>或<code>mobaxterm</code>。</p><p>我这里用<code>mobaxterm</code>，在SSH客户端中输入你的服务器的IP地址（雨云控制台获取），还有SSH端口（一般默认是22），然后点击好的或者打开。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114230151729_35725a0d39fe81dec3a06f6df7556770.png" alt="img"></p><p>然后输入账号并按回车，账号一般默认为<strong>root</strong>，接着输入密码并按回车确定，输入密码时不会显示出来。</p><p>温馨提示：在SSH终端中按住鼠标左键选择文字，然后松开鼠标，再在空白处单击一下，这样就把选中的文字复制了；在SSH终端单击右键即为粘贴。<img src="https://tc.zeruns.tech/images/2023/11/15/image-20231114230247490_7a4601d09764193903a7dd65a83a7e3a.png" alt="img"></p><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p><strong>如果选择了预安装Docker环境就直接跳过安装这一步，直接Docker换国内源那一步。</strong></p><p>在ssh终端，输入下面的指令。</p><p><strong>用apt包管理器来安装：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 安装docker，如果遇到问是否继续的就输入y来确定</span><br><span class="line">apt install docker.io</span><br><span class="line"></span><br><span class="line"># 设置docker开机自启和启动docker</span><br><span class="line">systemctl enable docker &amp;&amp; systemctl start docker</span><br><span class="line"></span><br><span class="line"># 检查是否安装成功，若安装成功会显示 Docker version x.x.x</span><br><span class="line">docker -v</span><br></pre></td></tr></table></figure><p><img src="https://tc.zeruns.tech/images/2023/11/15/20231104145335_3c4bd30bd3b0584594259e1b41067dfc.png" alt="img"></p><p><strong>若没安装成功就试试下面的安装脚本：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 安装docker</span><br><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br><span class="line"></span><br><span class="line"># 设置docker开机自启和启动docker</span><br><span class="line">systemctl enable docker &amp;&amp; systemctl start docker</span><br><span class="line"></span><br><span class="line"># 检查是否安装成功，若安装成功会显示 Docker version x.x.x</span><br><span class="line">docker -v</span><br></pre></td></tr></table></figure><p><strong>如果还是不行就尝试下面链接的手动安装教程吧</strong></p><p>docker手动安装教程：<a href="https://url.zeruns.tech/Y61CY">https://www.runoob.com/docker/ubuntu-docker-install.html</a></p><p><strong>Docker换国内源</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 创建或修改 /etc/docker/daemon.json 文件</span><br><span class="line">apt install nano &amp;&amp; nano /etc/docker/daemon.json</span><br><span class="line"></span><br><span class="line"># 然后输入下面内容:（输入完后按Ctrl+O，然后回车保存，接着按Ctrl+X退出编辑器）</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.nju.edu.cn&quot;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 重启docker服务</span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure><p><img src="https://tc.zeruns.tech/images/2023/11/15/20231104145422_db9ba3a39bae45cea80760eed7cfaaa6.png" alt="img"></p><h2 id="搭建NPS服务端"><a href="#搭建NPS服务端" class="headerlink" title="搭建NPS服务端"></a>搭建NPS服务端</h2><p><strong>安装NPS服务端：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 创建 /opt/nps 目录存放配置文件</span><br><span class="line">mkdir /opt/nps</span><br><span class="line"></span><br><span class="line"># 安装wget并且下载配置文件</span><br><span class="line">apt install -y wget &amp;&amp; wget https://cn-sy1.rains3.com/rainyun-assets/Pic/2023/11/conf_1b8df8f61551218f81065d9b20288371.zip</span><br><span class="line"></span><br><span class="line"># 解压配置文件到 /opt/nps 目录</span><br><span class="line">apt install unzip &amp;&amp; unzip conf_1b8df8f61551218f81065d9b20288371.zip -d /opt/nps</span><br><span class="line"></span><br><span class="line"># 拉取 yisier1/nps 镜像</span><br><span class="line">docker pull yisier1/nps</span><br><span class="line"></span><br><span class="line"># 运行 nps 容器，配置文件夹 conf 在 /opt/nps/conf 目录下</span><br><span class="line">docker run -d --name=nps --restart=always --net=host -v /opt/nps/conf:/conf yisier1/nps</span><br><span class="line"></span><br><span class="line"># 查看日志</span><br><span class="line">docker logs nps</span><br></pre></td></tr></table></figure><p><strong>安装完后在浏览器打开：<a href="https://blog.zeruns.tech/">http:&#x2F;&#x2F;你服务器IP:8080</a></strong></p><p><strong>使用用户名和密码登陆（默认admin&#x2F;123，正式使用一定要更改，修改<code>/opt/nps/conf/nps.conf</code>配置文件中的web_password）</strong></p><p><strong>修改密码：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 安装nano编辑器，编辑nps.conf文件</span><br><span class="line">apt install nano &amp;&amp; nano /opt/nps/conf/nps.conf</span><br><span class="line"></span><br><span class="line"># 找到web_password这一项，修改密码，修改完后按Ctrl+O，然后回车保存，接着按Ctrl+X退出编辑器</span><br><span class="line"># 建议将public_vkey设置为空</span><br><span class="line"></span><br><span class="line"># 修改完后重启NPS容器</span><br><span class="line">docker restart nps</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">名称</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">web_port</td><td align="left">web管理端口</td></tr><tr><td align="left">web_password</td><td align="left">web界面管理密码</td></tr><tr><td align="left">web_username</td><td align="left">web界面管理账号</td></tr><tr><td align="left">web_base_url</td><td align="left">web管理主路径,用于将web管理置于代理子路径后面</td></tr><tr><td align="left">bridge_port</td><td align="left">服务端客户端通信端口</td></tr><tr><td align="left">https_proxy_port</td><td align="left">域名代理https代理监听端口</td></tr><tr><td align="left">http_proxy_port</td><td align="left">域名代理http代理监听端口</td></tr><tr><td align="left">auth_key</td><td align="left">web api密钥</td></tr><tr><td align="left">bridge_type</td><td align="left">客户端与服务端连接方式kcp或tcp</td></tr><tr><td align="left">public_vkey</td><td align="left">客户端以配置文件模式启动时的密钥，设置为空表示关闭客户端配置文件连接模式</td></tr><tr><td align="left">ip_limit</td><td align="left">是否限制ip访问，true或false或忽略</td></tr><tr><td align="left">flow_store_interval</td><td align="left">服务端流量数据持久化间隔，单位分钟，忽略表示不持久化</td></tr><tr><td align="left">log_level</td><td align="left">日志输出级别</td></tr><tr><td align="left">auth_crypt_key</td><td align="left">获取服务端authKey时的aes加密密钥，16位</td></tr><tr><td align="left">p2p_ip</td><td align="left">服务端Ip，使用p2p模式必填</td></tr><tr><td align="left">p2p_port</td><td align="left">p2p模式开启的udp端口</td></tr><tr><td align="left">pprof_ip</td><td align="left">debug pprof 服务端ip</td></tr><tr><td align="left">pprof_port</td><td align="left">debug pprof 端口</td></tr><tr><td align="left">disconnect_timeout</td><td align="left">客户端连接超时，单位 5s，默认值 60，即 300s &#x3D; 5mins</td></tr></tbody></table><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115000816788_0b16874072311c516e48574da55c28d8.png" alt="img"></p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115000941365_43a275b1bb26eb2431680934fe97d3ab.png" alt="img"></p><h2 id="客户端安装使用"><a href="#客户端安装使用" class="headerlink" title="客户端安装使用"></a>客户端安装使用</h2><p>首先登陆进来NPS服务端的WEB管理页面，找到【客户端】，点击【新增】。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115001439355_46bb556c956eb19f8f24041f27705914.png" alt="img"></p><p>备注这里就根据需要写，其他的看着来就行。最后点击【新增】<img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115001707046_f594c78a2c3ab126c6a29ad133c6ad0a.png" alt="img"></p><p>刷新一下就能看到我们添加的客户端了，目前是处于离线状态。左边有一个小加号，点击可以展开。下面的客户端命令我们一会要用。下面是各种客户端安装方法，选一种适合的就行。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115001805628_744438ab41dba88e7414d8c4d3de869a.png" alt="img"></p><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>首先下载Windows版的客户端：</p><p>github下载地址：<a href="https://github.com/yisier/nps/releases">https://github.com/yisier/nps/releases</a></p><p>雨云ROS下载地址：<a href="https://cn-sy1.rains3.com/rainyun-assets/Pic/2023/11/windows_amd64_client.tar.gz">https://cn-sy1.rains3.com/rainyun-assets/Pic/2023/11/windows_amd64_client.tar.gz</a></p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115002039348_2fe8000fcbf3365beaa669c4d947929f.png" alt="img"></p><p>我在需要运行NPS客户端的Windows设备的C盘根目录下建立一个名字叫【npc】的目录，将刚才下载的NPS客户端的文件解压后放到里面。这里注意，我们只要【npc.exe】文件即可。</p><p>然后以管理员身份运行命令提示符，输入 <code>cd /npc</code> 跳转到npc目录下，输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npc.exe install 客户端命令（记得不要复制./npc 只要后边的）</span><br></pre></td></tr></table></figure><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115003815434_c2ce2f782ade151becbd71052ad05425.png" alt="img"></p><p>这样我们的npc就添加到系统服务里了，再找到 控制面板 - 管理工具 - 服务 里找到【nps内网穿透客户端】，找到【恢复】选项卡，按照下图中设置即可。设置完成后就可以启动服务了。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115003948001_4b9939acbddec1a252587523bdb1f09d.png" alt="img"></p><p>这样客户端就连接到了NPS的服务端了</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115004042765_e29944816b44564eb0089c083db6c6c7.png" alt="img"></p><h3 id="Linux-Docker"><a href="#Linux-Docker" class="headerlink" title="Linux Docker"></a>Linux Docker</h3><p>首先需要安装Docker，安装教程看上面。</p><p>Docker方式是支持多平台的，x86、ARM都可以，NAS用户可以通过这个方法安装客户端，一般NAS系统都支持docker。</p><p><strong>安装NPS客户端NPC：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取 yisier1/npc 镜像</span></span><br><span class="line">docker pull yisier1/npc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 npc 容器，按提示改好命令，如下图所示</span></span><br><span class="line">docker run -d --name=npc --restart=always --net=host yisier1/npc -server=&lt;ip:port&gt; -vkey=&lt;web界面中显示的密钥&gt; &lt;以及一些其他参数&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看日志</span></span><br><span class="line">docker logs npc</span><br></pre></td></tr></table></figure><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115005306527_d58a83cb64e7dcf36c967e5a205e7287.png" alt="img"><br>这样NPS客户端就算安装完成了</p><h3 id="建立内网穿透隧道"><a href="#建立内网穿透隧道" class="headerlink" title="建立内网穿透隧道"></a>建立内网穿透隧道</h3><p>按照上面的方法安装好客户端后就可以新建内网穿透隧道了，我这里以Windows的远程桌面服务为例，需要将TCP 3389端口映射出去，所以新建一个TCP隧道，你们根据自己实际需要选择TCP还是UDP。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115005727908_fba14e328216ac4e35c2046782b413c6.png" alt="img"></p><p>客户端ID填写你上面添加的客户端的ID，服务端端口填写想映射到服务器的哪个端口，目标IP端口填写你客户端想要映射的端口，IP填127.0.0.1表示本机，也可以填局域网内的其他设备的IP，可将局域网内的其他设备端口映射出去，我这里就填了本机的3389端口，填好后点击新增就行。</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115005859406_86201521bfe472764338524edfbf0847.png" alt="img"></p><p>接着你就可以通过这个服务器的这个端口访问到你内网的机器</p><p><img src="https://tc.zeruns.tech/images/2023/11/15/image-20231115010037963_d9a49899a00f24c3d1fede3b0a30c7e4.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在这个高度互联的时代，我们越来越依赖互联网来实现工作和生活的各种需求。然而，随着一些省份逐步收回家庭用户的公网IPv4地址（目前国内大部分地方都是多个用户共用一个公网IPv4地址），我们无法直接通过公网访问家里的设备和服务，这给我们带来了一定的困扰。但是别担心，内网穿透技术</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="雨云服务器" scheme="https://blog.bsgun.cn/tags/%E9%9B%A8%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="NPS搭建" scheme="https://blog.bsgun.cn/tags/NPS%E6%90%AD%E5%BB%BA/"/>
    
    <category term="内网穿透" scheme="https://blog.bsgun.cn/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>API随机获取一言</title>
    <link href="https://blog.bsgun.cn/posts/21998/"/>
    <id>https://blog.bsgun.cn/posts/21998/</id>
    <published>2020-09-06T07:38:43.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>API随机获取一言代码</strong></p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$counter</span> = <span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;counter.dat&quot;</span>));</span><br><span class="line">     <span class="variable">$_SESSION</span>[<span class="string">&#x27;#&#x27;</span>] = <span class="literal">true</span>;</span><br><span class="line">     <span class="variable">$counter</span>++;</span><br><span class="line">     <span class="variable">$fp</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;counter.dat&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">     <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>, <span class="variable">$counter</span>);</span><br><span class="line">     <span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//获取句子文件的绝对路径</span></span><br><span class="line"><span class="variable">$path</span> = <span class="title function_ invoke__">dirname</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$file</span> = <span class="title function_ invoke__">file</span>(<span class="variable">$path</span>.<span class="string">&quot;binduyan.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//随机读取一行</span></span><br><span class="line"><span class="variable">$arr</span>  = <span class="title function_ invoke__">mt_rand</span>( <span class="number">0</span>, <span class="title function_ invoke__">count</span>( <span class="variable">$file</span> ) - <span class="number">1</span> );</span><br><span class="line"><span class="variable">$content</span>  = <span class="title function_ invoke__">trim</span>(<span class="variable">$file</span>[<span class="variable">$arr</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//编码判断，用于输出相应的响应头部编码</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;charset&#x27;</span>]) &amp;&amp; !<span class="keyword">empty</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;charset&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$charset</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;charset&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">strcasecmp</span>(<span class="variable">$charset</span>,<span class="string">&quot;gbk&quot;</span>) == <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="variable">$content</span> = <span class="title function_ invoke__">mb_convert_encoding</span>(<span class="variable">$content</span>,<span class="string">&#x27;gbk&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$charset</span> = <span class="string">&#x27;utf-8&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//格式化判断，输出js或纯文本</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;encode&#x27;</span>] === <span class="string">&#x27;js&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;function binduyan()&#123;document.write(&#x27;&quot;</span> . <span class="variable">$content</span> .<span class="string">&quot;&#x27;);&#125;&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;encode&#x27;</span>] === <span class="string">&#x27;json&#x27;</span>)&#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/json&#x27;</span>);</span><br><span class="line">    <span class="variable">$content</span> = <span class="keyword">array</span>(<span class="string">&#x27;text&#x27;</span>=&gt;<span class="variable">$content</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$content</span>, JSON_UNESCAPED_UNICODE);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$content</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上传你的服务器或者主机空间，命名随意后缀为<code>.php</code></p><p>并在同级目录上传一个为<code>binduyuan.txt</code>后缀的文件</p><p>PS：一句话占一行</p><p>访问形式为   <code>http(s)://你的域名/你的命名.php</code></p><p>例如 <code> https://bsgun.cn/binduyan.php</code></p><blockquote><p>车到山前必有雾，船到桥头自然沉。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;API随机获取一言代码&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="API" scheme="https://blog.bsgun.cn/tags/API/"/>
    
    <category term="分享" scheme="https://blog.bsgun.cn/tags/%E5%88%86%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>API随机获取图片代码</title>
    <link href="https://blog.bsgun.cn/posts/1806/"/>
    <id>https://blog.bsgun.cn/posts/1806/</id>
    <published>2020-08-28T22:40:00.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>API随机获取图片代码</strong></p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$counter</span> = <span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;counter.dat&quot;</span>));</span><br><span class="line">     <span class="variable">$_SESSION</span>[<span class="string">&#x27;#&#x27;</span>] = <span class="literal">true</span>;</span><br><span class="line">     <span class="variable">$counter</span>++;</span><br><span class="line">     <span class="variable">$fp</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;counter.dat&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">     <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>, <span class="variable">$counter</span>);</span><br><span class="line">     <span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;img.txt&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>))&#123;</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&#x27;文件不存在&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$pics</span> = [];</span><br><span class="line"><span class="variable">$fs</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="keyword">while</span>(!<span class="title function_ invoke__">feof</span>(<span class="variable">$fs</span>))&#123;</span><br><span class="line"><span class="variable">$line</span>=<span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">fgets</span>(<span class="variable">$fs</span>));</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$line</span>!=<span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$pics</span>, <span class="variable">$line</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$pic</span> = <span class="variable">$pics</span>[<span class="title function_ invoke__">array_rand</span>(<span class="variable">$pics</span>)];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$type</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line"><span class="keyword">switch</span>(<span class="variable">$type</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/json&#x27;</span>);</span><br><span class="line"><span class="keyword">die</span>(<span class="title function_ invoke__">json_encode</span>([<span class="string">&#x27;pic&#x27;</span>=&gt;<span class="variable">$pic</span>]));</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">die</span>(<span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: <span class="subst">$pic</span>&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上传你的服务器或者主机空间，命名随意后缀为<code>.php</code></p><p>并在同级目录上传一个为<code>img.txt</code>后缀的文件</p><p>PS：一个图片链接链接占一行</p><p>访问形式为   <code>http(s)://你的域名/你的命名.php</code></p><p>例如 <code> https://bsgun.cn/m.php</code></p><p>输出为图片</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;API随机获取图片代码&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=</summary>
      
    
    
    
    <category term="教程" scheme="https://blog.bsgun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="API" scheme="https://blog.bsgun.cn/tags/API/"/>
    
    <category term="分享" scheme="https://blog.bsgun.cn/tags/%E5%88%86%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>博客现状</title>
    <link href="https://blog.bsgun.cn/posts/33483/"/>
    <id>https://blog.bsgun.cn/posts/33483/</id>
    <published>2020-08-17T11:12:00.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="受到攻击"><a href="#受到攻击" class="headerlink" title="受到攻击"></a>受到攻击</h2><p><strong>2020.7.24  网站受到大量攻击<br>导致无法访问，照成 <code>0</code> 损失</strong></p><p><strong>2020.7.30 整站整个迁移至Hexo</strong></p><h2 style="text-align:center">网站站点状态</h2><table><thead><tr><th align="center">名称</th><th align="center">接口</th><th align="center">状态</th></tr></thead><tbody><tr><td align="center">主页</td><td align="center"><a href="https://www.bsgun.cn/">https://www.bsgun.cn/</a></td><td align="center">✔️</td></tr><tr><td align="center">搜索</td><td align="center"><a href="https://nav.bsgun.cn/">https://nav.bsgun.cn/</a></td><td align="center">✔️</td></tr><tr><td align="center">博客</td><td align="center"><a href="https://blog.bsgun.cn/">https://blog.bsgun.cn/</a></td><td align="center">✔️</td></tr><tr><td align="center">我们</td><td align="center"><a href="https://love.bsgun.cn/">https://love.bsgun.cn/</a></td><td align="center">✔️</td></tr><tr><td align="center">监测</td><td align="center"><a href="https://status.bsgun.cn/">https://status.bsgun.cn/</a></td><td align="center">✔️</td></tr><tr><td align="center">图床</td><td align="center"><a href="https://img.ruom.top/">https://img.ruom.top/</a></td><td align="center">✔️</td></tr><tr><td align="center">网盘</td><td align="center"><a href="https://pan.ruom.top/">https://pan.ruom.top/</a></td><td align="center">✔️</td></tr><tr><td align="center">API</td><td align="center"><a href="https://api.bsgun.cn/">https://api.bsgun.cn/</a></td><td align="center">❌</td></tr><tr><td align="center">Rss</td><td align="center"><a href="https://rss.bsgun.cn/">https://rss.bsgun.cn/</a></td><td align="center">❌</td></tr></tbody></table><blockquote><p>❌无法访问✔️正常访问</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;受到攻击&quot;&gt;&lt;a href=&quot;#受到攻击&quot; class=&quot;headerlink&quot; title=&quot;受到攻击&quot;&gt;&lt;/a&gt;受到攻击&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;2020.7.24  网站受到大量攻击&lt;br&gt;导致无法访问，照成 &lt;code&gt;0&lt;/code&gt; 损失&lt;/st</summary>
      
    
    
    
    <category term="随想" scheme="https://blog.bsgun.cn/categories/%E9%9A%8F%E6%83%B3/"/>
    
    
  </entry>
  
  <entry>
    <title>阿里云Serverless函数计算领马克杯</title>
    <link href="https://blog.bsgun.cn/posts/ae8e1de1/"/>
    <id>https://blog.bsgun.cn/posts/ae8e1de1/</id>
    <published>2020-07-12T14:08:02.000Z</published>
    <updated>2024-10-03T08:59:05.476Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>活动已经结束了</strong></p></blockquote><p><img src="https://cdn.bsgun.cn/2024/06/27/2024062787109.webp" alt="白嫖成功"></p><p><strong>刚刚没啥子事咱也去领了个阿里云的马克杯，哈哈哈白嫖成功–<a href="https://developer.aliyun.com/adc/series/fc/">活动地址</a></strong></p><ul><li><strong>在活动期间每个用户可挑战两次考试，</strong></li><li><strong>每天会增加200的奖品余额，领完即止。</strong></li><li><strong>可能凌晨补一次，下午随机补，前一天答完没领到的可以次日再来领取。</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;活动已经结束了&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.bsgun.cn/2024/06/27/2024062787109.webp&quot; alt=&quot;白嫖成功&quot;&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="生活" scheme="https://blog.bsgun.cn/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="阿里云" scheme="https://blog.bsgun.cn/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
    <category term="活动" scheme="https://blog.bsgun.cn/tags/%E6%B4%BB%E5%8A%A8/"/>
    
    <category term="白嫖" scheme="https://blog.bsgun.cn/tags/%E7%99%BD%E5%AB%96/"/>
    
  </entry>
  
</feed>
