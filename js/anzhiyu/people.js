"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,a){return r&&_defineProperties(e.prototype,r),a&&_defineProperties(e,a),e}var peopleConfig={src:GLOBAL_CONFIG.peoplecanvas.img,rows:15,cols:7},randomRange=function(e,r){return e+Math.random()*(r-e)},randomIndex=function(e){return 0|randomRange(0,e.length)},removeFromArray=function(e,r){return e.splice(r,1)[0]},removeItemFromArray=function(e,r){return removeFromArray(e,e.indexOf(r))},removeRandomFromArray=function(e){return removeFromArray(e,randomIndex(e))},getRandomFromArray=function(e){return e[0|randomIndex(e)]},resetPeep=function(e){var r,a,t=e.stage,n=e.peep,o=.5<Math.random()?1:-1,i=100-250*gsap.parseEase("power2.in")(Math.random()),l=t.height-n.height+i;return 1==o?(r=-n.width,a=t.width,n.scaleX=1):(r=t.width+n.width,a=0,n.scaleX=-1),n.x=r,n.y=l,{startX:r,startY:n.anchorY=l,endX:a}},normalWalk=function(e){var r=e.peep,a=e.props,t=(a.startX,a.startY),n=a.endX,o=gsap.timeline();return o.timeScale(randomRange(.5,1.5)),o.to(r,{duration:10,x:n,ease:"none"},0),o.to(r,{duration:.25,repeat:40,yoyo:!0,y:t-10},0),o},walks=[normalWalk],Peep=function(){function e(r){var a=r.image,t=r.rect;_classCallCheck(this,e),this.image=a,this.setRect(t),this.x=0,this.y=0,this.anchorY=0,this.scaleX=1,this.walk=null}return _createClass(e,[{key:"setRect",value:function(e){this.rect=e,this.width=e[2],this.height=e[3],this.drawArgs=[this.image].concat(_toConsumableArray(e),[0,0,this.width,this.height])}},{key:"render",value:function(e){e.save(),e.translate(this.x,this.y),e.scale(this.scaleX,1),e.drawImage.apply(e,_toConsumableArray(this.drawArgs)),e.restore()}}]),e}(),img=document.createElement("img");img.onload=init,img.src=peopleConfig.src;let peoplecanvasEl=document.getElementById("peoplecanvas"),ctx=peoplecanvasEl?peoplecanvasEl.getContext("2d"):void 0,stage={width:0,height:0},allPeeps=[],availablePeeps=[],crowd=[];function init(){peoplecanvasEl&&(createPeeps(),resize(),gsap.ticker.add(render),window.addEventListener("resize",resize))}function createPeeps(){for(var e=peopleConfig.rows,r=peopleConfig.cols,a=e*r,t=img.naturalWidth/e,n=img.naturalHeight/r,o=0;o<a;o++)allPeeps.push(new Peep({image:img,rect:[o%e*t,(o/e|0)*n,t,n]}))}function resize(){peoplecanvasEl&&0!=peoplecanvasEl.clientWidth&&(stage.width=peoplecanvasEl.clientWidth,stage.height=peoplecanvasEl.clientHeight,peoplecanvasEl.width=stage.width*devicePixelRatio,peoplecanvasEl.height=stage.height*devicePixelRatio,crowd.forEach((function(e){e.walk.kill()})),crowd.length=0,availablePeeps.length=0,availablePeeps.push.apply(availablePeeps,allPeeps),initCrowd())}function initCrowd(){for(;availablePeeps.length;)addPeepToCrowd().walk.progress(Math.random())}function addPeepToCrowd(){var e=removeRandomFromArray(availablePeeps),r=getRandomFromArray(walks)({peep:e,props:resetPeep({peep:e,stage:stage})}).eventCallback("onComplete",(function(){removePeepFromCrowd(e),addPeepToCrowd()}));return e.walk=r,crowd.push(e),crowd.sort((function(e,r){return e.anchorY-r.anchorY})),e}function removePeepFromCrowd(e){removeItemFromArray(crowd,e),availablePeeps.push(e)}function render(){peoplecanvasEl&&(peoplecanvasEl.width=peoplecanvasEl.width,ctx.save(),ctx.scale(devicePixelRatio,devicePixelRatio),crowd.forEach((function(e){e.render(ctx)})),ctx.restore())}document.addEventListener("pjax:success",(e=>{peoplecanvasEl=document.getElementById("peoplecanvas"),peoplecanvasEl&&(ctx=peoplecanvasEl?peoplecanvasEl.getContext("2d"):void 0,window.removeEventListener("resize",resize),gsap.ticker.remove(render),setTimeout((()=>{peoplecanvasEl&&(resize(),gsap.ticker.add(render),window.addEventListener("resize",resize))}),300))}));ation':0.25,'repeat':0x28,'yoyo':!0x0,'y':_0x3a7fa4-0xa},0x0),_0x48ba0d;},walks=[normalWalk],Peep=(function(){var _0x584360=_0x379454;function _0x2f20d9(_0x5ef97b){var _0x4374be=_0x4339,_0x3c0631=_0x5ef97b[_0x4374be(0x10d)],_0xd955a9=_0x5ef97b['rect'];_classCallCheck(this,_0x2f20d9),this['image']=_0x3c0631,this[_0x4374be(0x104)](_0xd955a9),this['x']=0x0,this['y']=0x0,this[_0x4374be(0x132)]=0x0,this[_0x4374be(0xf7)]=0x1,this['walk']=null;}return _createClass(_0x2f20d9,[{'key':_0x584360(0x104),'value':function(_0x1622a1){var _0x285501=_0x584360;this[_0x285501(0x13c)]=_0x1622a1,this[_0x285501(0xf5)]=_0x1622a1[0x2],this[_0x285501(0x121)]=_0x1622a1[0x3],this[_0x285501(0x120)]=[this[_0x285501(0x10d)]][_0x285501(0x115)](_toConsumableArray(_0x1622a1),[0x0,0x0,this[_0x285501(0xf5)],this[_0x285501(0x121)]]);}},{'key':_0x584360(0x108),'value':function(_0x80d7a2){var _0x2878ff=_0x584360;_0x80d7a2[_0x2878ff(0x127)](),_0x80d7a2[_0x2878ff(0x131)](this['x'],this['y']),_0x80d7a2[_0x2878ff(0x106)](this['scaleX'],0x1),_0x80d7a2[_0x2878ff(0x116)][_0x2878ff(0x128)](_0x80d7a2,_toConsumableArray(this[_0x2878ff(0x120)])),_0x80d7a2[_0x2878ff(0xf3)]();}}]),_0x2f20d9;}()),img=document[_0x379454(0x139)]('img');img[_0x379454(0x101)]=init,img['src']=peopleConfig[_0x379454(0x143)];function _0x47bb(){var _0x2918c7=['onload','54fkrbbg','peep','setRect','Arguments','scale','push','render','10fMEWEO','iterator','none','ticker','image','Set','492376TSlQcZ','naturalWidth','undefined','length','parseEase','6tjpcGG','concat','drawImage','timeScale','configurable','Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.','cols','add','getElementById','sort','clientWidth','name','drawArgs','height','power2.in','progress','prototype','props','from','save','apply','walk','defineProperty','value','startY','constructor','removeEventListener','call','63315qXICLP','translate','anchorY','indexOf','105585crgEBb','clientHeight','addEventListener','@@iterator','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','createElement','enumerable','random','rect','forEach','stage','onComplete','img','386044qNDRtl','peoplecanvas','src','writable','Object','pjax:success','toString','getContext','50740MzeZrZ','restore','430764QYncke','width','remove','scaleX','80448NTxBFS','resize','845NBkNwe','test','7JTCItW','isArray','rows','44GyIQOY','slice'];_0x47bb=function(){return _0x2918c7;};return _0x47bb();}let peoplecanvasEl=document[_0x379454(0x11c)]('peoplecanvas'),ctx=peoplecanvasEl?peoplecanvasEl[_0x379454(0xf1)]('2d'):undefined,stage={'width':0x0,'height':0x0},allPeeps=[],availablePeeps=[],crowd=[];function init(){var _0x223379=_0x379454;if(!peoplecanvasEl)return;createPeeps(),resize(),gsap['ticker'][_0x223379(0x11b)](render),window[_0x223379(0x136)](_0x223379(0xf9),resize);}document[_0x379454(0x136)](_0x379454(0xef),_0x8ed5a1=>{var _0x3aa1e6=_0x379454;peoplecanvasEl=document[_0x3aa1e6(0x11c)](_0x3aa1e6(0x142)),peoplecanvasEl&&(ctx=peoplecanvasEl?peoplecanvasEl[_0x3aa1e6(0xf1)]('2d'):undefined,window[_0x3aa1e6(0x12e)](_0x3aa1e6(0xf9),resize),gsap[_0x3aa1e6(0x10c)][_0x3aa1e6(0xf6)](render),setTimeout(()=>{var _0x1cbb7d=_0x3aa1e6;if(!peoplecanvasEl)return;resize(),gsap[_0x1cbb7d(0x10c)][_0x1cbb7d(0x11b)](render),window[_0x1cbb7d(0x136)](_0x1cbb7d(0xf9),resize);},0x12c));});function createPeeps(){var _0x13ae32=_0x379454;for(var _0x2a8c37=peopleConfig[_0x13ae32(0xfe)],_0x289c41=peopleConfig[_0x13ae32(0x11a)],_0x4633d8=_0x2a8c37*_0x289c41,_0x346788=img[_0x13ae32(0x110)]/_0x2a8c37,_0x5e2d33=img['naturalHeight']/_0x289c41,_0x69cb10=0x0;_0x69cb10<_0x4633d8;_0x69cb10++)allPeeps[_0x13ae32(0x107)](new Peep({'image':img,'rect':[_0x69cb10%_0x2a8c37*_0x346788,(_0x69cb10/_0x2a8c37|0x0)*_0x5e2d33,_0x346788,_0x5e2d33]}));}function resize(){var _0x1175b1=_0x379454;peoplecanvasEl&&peoplecanvasEl['clientWidth']!=0x0&&(stage[_0x1175b1(0xf5)]=peoplecanvasEl[_0x1175b1(0x11e)],stage[_0x1175b1(0x121)]=peoplecanvasEl[_0x1175b1(0x135)],peoplecanvasEl[_0x1175b1(0xf5)]=stage[_0x1175b1(0xf5)]*devicePixelRatio,peoplecanvasEl['height']=stage[_0x1175b1(0x121)]*devicePixelRatio,crowd[_0x1175b1(0x13d)](function(_0x5ca3a1){var _0x3a63eb=_0x1175b1;_0x5ca3a1[_0x3a63eb(0x129)]['kill']();}),crowd[_0x1175b1(0x112)]=0x0,availablePeeps[_0x1175b1(0x112)]=0x0,availablePeeps['push'][_0x1175b1(0x128)](availablePeeps,allPeeps),initCrowd());}function initCrowd(){var _0x21b9e1=_0x379454;for(;availablePeeps[_0x21b9e1(0x112)];)addPeepToCrowd()[_0x21b9e1(0x129)][_0x21b9e1(0x123)](Math[_0x21b9e1(0x13b)]());}function addPeepToCrowd(){var _0x57c2a7=_0x379454,_0xeca670=removeRandomFromArray(availablePeeps),_0x1e1d20=getRandomFromArray(walks)({'peep':_0xeca670,'props':resetPeep({'peep':_0xeca670,'stage':stage})})['eventCallback'](_0x57c2a7(0x13f),function(){removePeepFromCrowd(_0xeca670),addPeepToCrowd();});return _0xeca670[_0x57c2a7(0x129)]=_0x1e1d20,crowd[_0x57c2a7(0x107)](_0xeca670),crowd[_0x57c2a7(0x11d)](function(_0x381d96,_0x482eab){var _0x3267f3=_0x57c2a7;return _0x381d96[_0x3267f3(0x132)]-_0x482eab[_0x3267f3(0x132)];}),_0xeca670;}function removePeepFromCrowd(_0x780568){var _0x46b068=_0x379454;removeItemFromArray(crowd,_0x780568),availablePeeps[_0x46b068(0x107)](_0x780568);}function _0x4339(_0x5f34d4,_0x1fc2e8){var _0x47bb9a=_0x47bb();return _0x4339=function(_0x43390a,_0x2333a4){_0x43390a=_0x43390a-0xee;var _0x5940b2=_0x47bb9a[_0x43390a];return _0x5940b2;},_0x4339(_0x5f34d4,_0x1fc2e8);}function render(){var _0x27c4e2=_0x379454;if(!peoplecanvasEl)return;peoplecanvasEl['width']=peoplecanvasEl['width'],ctx[_0x27c4e2(0x127)](),ctx['scale'](devicePixelRatio,devicePixelRatio),crowd[_0x27c4e2(0x13d)](function(_0x1cbc7a){var _0x303fd0=_0x27c4e2;_0x1cbc7a[_0x303fd0(0x108)](ctx);}),ctx[_0x27c4e2(0xf3)]();}