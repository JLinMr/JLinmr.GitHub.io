rm={};let aElements=document.getElementsByTagName("a");for(let e=0;e<aElements.length;e++){aElements[e].setAttribute("draggable","false");let t=aElements[e].getElementsByTagName("img");for(let e=0;e<t.length;e++)t[e].setAttribute("draggable","false")}rm.showRightMenu=function(e,t=0,n=0){console.info(t,n);let o=document.getElementById("rightMenu");o.style.top=t+"px",o.style.left=n+"px",e?(o.style.display="block",stopMaskScroll()):o.style.display="none"},rm.hideRightMenu=function(){rm.showRightMenu(!1),document.querySelector("#rightmenu-mask").style.display="none"};let rmWidth=document.getElementById("rightMenu").offsetWidth,rmHeight=document.getElementById("rightMenu").offsetHeight;rm.reloadrmSize=function(){rightMenu.style.visibility="hidden",rightMenu.style.display="block",rmWidth=document.getElementById("rightMenu").offsetWidth,rmHeight=document.getElementById("rightMenu").offsetHeight,rightMenu.style.visibility="visible"};let domhref="",domImgSrc="",globalEvent=null;var oncontextmenuFunction=function(e){if(document.body.clientWidth>768){let t=e.clientX+10,n=e.clientY;const o=document.querySelector(".rightMenuOther"),i=document.querySelector(".rightMenuPlugin"),c=document.querySelector("#menu-copytext"),l=document.querySelector("#menu-pastetext"),m=document.querySelector("#menu-commenttext"),d=document.querySelector("#menu-newwindow"),u=document.querySelector("#menu-newwindowimg"),r=document.querySelector("#menu-copylink"),a=document.querySelector("#menu-copyimg"),s=document.querySelector("#menu-downloadimg"),y=document.querySelector("#menu-search"),g=document.querySelector("#menu-searchBaidu"),h=document.querySelector("#menu-music-toggle"),p=document.querySelector("#menu-music-back"),w=document.querySelector("#menu-music-forward"),E=document.querySelector("#menu-music-playlist"),f=document.querySelector("#menu-music-copyMusicName");let k=e.target.href,v=e.target.currentSrc,b=!1;o.style.display="block",globalEvent=e,selectTextNow&&window.getSelection()?(b=!0,c.style.display="block",m.style.display="block",y.style.display="block",g.style.display="block"):(c.style.display="none",m.style.display="none",g.style.display="none",y.style.display="none"),k?(b=!0,d.style.display="block",r.style.display="block",domhref=k):(d.style.display="none",r.style.display="none"),v?(b=!0,a.style.display="block",s.style.display="block",u.style.display="block",document.getElementById("rightMenu").style.width="12rem",domImgSrc=v):(a.style.display="none",s.style.display="none",u.style.display="none"),"input"===e.target.tagName.toLowerCase()||"textarea"===e.target.tagName.toLowerCase()?(b=!0,l.style.display="block"):l.style.display="none";const B=document.querySelector("#nav-music");return B&&B.contains(e.target)?(b=!0,h.style.display="block",p.style.display="block",w.style.display="block",E.style.display="block",f.style.display="block"):(h.style.display="none",p.style.display="none",w.style.display="none",E.style.display="none",f.style.display="none"),b?(o.style.display="none",i.style.display="block"):i.style.display="none",rm.reloadrmSize(),t+rmWidth>window.innerWidth&&(t-=rmWidth+10),n+rmHeight>window.innerHeight&&(n-=n+rmHeight-window.innerHeight),rm.showRightMenu(!0,n,t),document.getElementById("rightmenu-mask").style.display="flex",!1}};function imageToBlob(e){const t=new Image,n=document.createElement("canvas"),o=n.getContext("2d");return t.crossOrigin="",t.src=e,new Promise((e=>{t.onload=function(){n.width=this.naturalWidth,n.height=this.naturalHeight,o.drawImage(this,0,0),n.toBlob((t=>{e(t)}),"image/png",.75)}}))}async function copyImage(e){const t=await imageToBlob(e),n=new ClipboardItem({"image/png":t});navigator.clipboard.write([n])}function stopMaskScroll(){if(document.getElementById("rightmenu-mask")){document.getElementById("rightmenu-mask").addEventListener("mousewheel",(function(e){rm.hideRightMenu()}),{passive:!0})}if(document.getElementById("rightMenu")){document.getElementById("rightMenu").addEventListener("mousewheel",(function(e){rm.hideRightMenu()}),{passive:!0})}}window.oncontextmenu=oncontextmenuFunction,rm.downloadimging=!1,rm.writeClipImg=function(e){console.log("按下复制"),rm.hideRightMenu(),anzhiyu.snackbarShow("正在下载中，请稍后",!1,1e4),0==rm.downloadimging&&(rm.downloadimging=!0,setTimeout((function(){copyImage(e),anzhiyu.snackbarShow("复制成功！图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1}),"10000"))},rm.copyUrl=function(e){const t=document.createElement("input");t.id="copyVal",document.body.appendChild(t);const n=e;t.value=n,t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),t.remove()},rm.rightmenuCopyText=function(e){navigator.clipboard&&navigator.clipboard.writeText(e),rm.hideRightMenu()},rm.copyPageUrl=function(e){e||(e=window.location.href),rm.copyUrl(e),anzhiyu.snackbarShow("复制链接地址成功",!1,2e3),rm.hideRightMenu()};var selectTextNow="";function selceText(){var e;e=document.selection?document.selection.createRange().text:window.getSelection().toString(),selectTextNow=""!==e?e:""}function replaceAll(e,t,n){return e.split(t).join(n)}function addRightMenuClickEvent(){document.getElementById("menu-backward").addEventListener("click",(function(){window.history.back(),rm.hideRightMenu()})),document.getElementById("menu-forward").addEventListener("click",(function(){window.history.forward(),rm.hideRightMenu()})),document.getElementById("menu-refresh").addEventListener("click",(function(){window.location.reload()})),document.getElementById("menu-top").addEventListener("click",(function(){anzhiyu.scrollToDest(0,500),rm.hideRightMenu()})),document.getElementById("menu-translate").addEventListener("click",(function(){window.translateFn.translatePage(),rm.hideRightMenu()}));document.querySelectorAll(".menu-link").forEach((function(e){e.addEventListener("click",rm.hideRightMenu)})),document.getElementById("menu-home")&&document.getElementById("menu-home").addEventListener("click",(function(){window.location.href=window.location.origin})),document.getElementById("menu-randomPost").addEventListener("click",(function(){toRandomPost()})),document.getElementById("menu-commentBarrage").addEventListener("click",anzhiyu.switchCommentBarrage),document.getElementById("rightmenu-mask").addEventListener("click",rm.hideRightMenu),document.getElementById("rightmenu-mask").addEventListener("contextmenu",(function(e){rm.hideRightMenu(),e.preventDefault()})),document.getElementById("menu-copy").addEventListener("click",(()=>{rm.copyPageUrl()})),document.getElementById("menu-pastetext").addEventListener("click",rm.pasteText),document.getElementById("menu-copytext").addEventListener("click",(function(){rm.rightmenuCopyText(selectTextNow);const e=GLOBAL_CONFIG.copyright;e.copy&&anzhiyu.snackbarShow(e.languages.copySuccess)})),document.getElementById("menu-commenttext").addEventListener("click",(function(){rm.rightMenuCommentText(selectTextNow)})),document.getElementById("menu-newwindow").addEventListener("click",(function(){window.open(domhref,"_blank"),rm.hideRightMenu()})),document.getElementById("menu-copylink").addEventListener("click",rm.copyLink),document.getElementById("menu-downloadimg").addEventListener("click",(function(){anzhiyu.downloadImage(domImgSrc,"anzhiyu")})),document.getElementById("menu-newwindowimg").addEventListener("click",(function(){window.open(domImgSrc,"_blank"),rm.hideRightMenu()})),document.getElementById("menu-copyimg").addEventListener("click",(function(){rm.writeClipImg(domImgSrc)})),document.getElementById("menu-searchBaidu").addEventListener("click",rm.searchBaidu),document.getElementById("menu-music-toggle").addEventListener("click",anzhiyu.musicToggle),document.getElementById("menu-music-back").addEventListener("click",anzhiyu.musicSkipBack),document.getElementById("menu-music-forward").addEventListener("click",anzhiyu.musicSkipForward),document.getElementById("menu-music-copyMusicName").addEventListener("click",(function(){rm.rightmenuCopyText(anzhiyu.musicGetName()),anzhiyu.snackbarShow("复制歌曲名称成功",!1,3e3)}))}document.onmouseup=document.ondblclick=selceText,rm.readClipboard=function(){navigator.clipboard&&navigator.clipboard.readText().then((e=>rm.insertAtCaret(globalEvent.target,e)))},rm.insertAtCaret=function(e,t){const n=e.selectionStart,o=e.selectionEnd;if(document.selection)e.focus(),document.selection.createRange().text=t,e.focus();else if(n||"0"==n){var i=e.scrollTop;e.value=e.value.substring(0,n)+t+e.value.substring(o,e.value.length),e.focus(),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.scrollTop=i}else e.value+=t,e.focus()},rm.pasteText=function(){rm.readClipboard();rm.hideRightMenu()},rm.rightMenuCommentText=function(e){rm.hideRightMenu();var t=document.getElementById("post-comment").offsetTop;window.scrollTo(0,t-80),"undefined"!=e&&"null"!=e||(e="好棒！"),function t(){setTimeout((()=>{var n=document.getElementsByClassName("el-textarea__inner")[0];n||t();let o=document.createEvent("HTMLEvents");o.initEvent("input",!0,!0);let i=replaceAll(e,"\n","\n> ");n.value="> "+i+"\n\n",n.dispatchEvent(o),n.focus(),n.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}),100)}()},rm.searchBaidu=function(){anzhiyu.snackbarShow("即将跳转到百度搜索",!1,2e3),setTimeout((function(){window.open("https://www.baidu.com/s?wd="+selectTextNow)}),"2000"),rm.hideRightMenu()},rm.copyLink=function(){rm.rightmenuCopyText(domhref),anzhiyu.snackbarShow("已复制链接地址")},addRightMenuClickEvent();abc(0x9e)](this,0x0,0x0),_0x42014e[_0x306abc(0xc6)](_0x43aebe=>{_0x2d8ebe(_0x43aebe);},_0x306abc(0x88),0.75);};});}async function copyImage(_0x138bb8){const _0x15b016=_0x2e363a,_0x144ac0=await imageToBlob(_0x138bb8),_0x3e5e3a=new ClipboardItem({'image/png':_0x144ac0});navigator[_0x15b016(0x104)]['write']([_0x3e5e3a]);}rm[_0x2e363a(0xa2)]=function(_0x5f354a){const _0x203ef5=_0x2e363a,_0x42e675=document[_0x203ef5(0x100)](_0x203ef5(0xac));_0x42e675['id']=_0x203ef5(0xf1),document[_0x203ef5(0xfd)][_0x203ef5(0xf6)](_0x42e675);const _0x472801=_0x5f354a;_0x42e675[_0x203ef5(0xda)]=_0x472801,_0x42e675['select'](),_0x42e675[_0x203ef5(0xec)](0x0,_0x42e675['value'][_0x203ef5(0x86)]),document['execCommand'](_0x203ef5(0xc5)),_0x42e675[_0x203ef5(0xbc)]();};function stopMaskScroll(){const _0x3c95d4=_0x2e363a;if(document[_0x3c95d4(0xf5)](_0x3c95d4(0x9b))){let _0x5a6102=document[_0x3c95d4(0xf5)](_0x3c95d4(0x9b));_0x5a6102[_0x3c95d4(0xad)](_0x3c95d4(0xcc),function(_0x35f05f){const _0x1df440=_0x3c95d4;rm[_0x1df440(0xe7)]();},{'passive':!![]});}if(document[_0x3c95d4(0xf5)](_0x3c95d4(0x85))){let _0x1216fd=document[_0x3c95d4(0xf5)](_0x3c95d4(0x85));_0x1216fd[_0x3c95d4(0xad)](_0x3c95d4(0xcc),function(_0xc0f5a7){rm['hideRightMenu']();},{'passive':!![]});}}rm[_0x2e363a(0xbd)]=function(_0x2000e0){const _0x11eedf=_0x2e363a;navigator[_0x11eedf(0x104)]&&navigator[_0x11eedf(0x104)]['writeText'](_0x2000e0),rm['hideRightMenu']();},rm[_0x2e363a(0x99)]=function(_0x4d842d){const _0x274525=_0x2e363a;!_0x4d842d&&(_0x4d842d=window[_0x274525(0x7e)][_0x274525(0x76)]),rm[_0x274525(0xa2)](_0x4d842d),anzhiyu[_0x274525(0xa9)]('复制链接地址成功',![],0x7d0),rm[_0x274525(0xe7)]();};var selectTextNow='';document[_0x2e363a(0xe3)]=document[_0x2e363a(0xca)]=selceText;function selceText(){const _0x19674c=_0x2e363a;var _0xce0aa;document[_0x19674c(0x107)]?_0xce0aa=document['selection'][_0x19674c(0xb0)]()[_0x19674c(0xc8)]:_0xce0aa=window[_0x19674c(0xa4)]()[_0x19674c(0x9c)](),selectTextNow=_0xce0aa!==''?_0xce0aa:'';}rm[_0x2e363a(0x108)]=function(){const _0x313efe=_0x2e363a;navigator['clipboard']&&navigator[_0x313efe(0x104)][_0x313efe(0x70)]()['then'](_0xb802ec=>rm[_0x313efe(0xba)](globalEvent['target'],_0xb802ec));},rm[_0x2e363a(0xba)]=function(_0x57674a,_0x22ae12){const _0x516e7a=_0x2e363a,_0x32d485=_0x57674a[_0x516e7a(0xaf)],_0x36aafd=_0x57674a[_0x516e7a(0xa5)];if(document[_0x516e7a(0x107)]){_0x57674a[_0x516e7a(0x10b)]();var _0x11eb0b=document[_0x516e7a(0x107)][_0x516e7a(0xb0)]();_0x11eb0b['text']=_0x22ae12,_0x57674a['focus']();}else{if(_0x32d485||_0x32d485=='0'){var _0x4963d9=_0x57674a[_0x516e7a(0xae)];_0x57674a['value']=_0x57674a['value'][_0x516e7a(0xfb)](0x0,_0x32d485)+_0x22ae12+_0x57674a['value'][_0x516e7a(0xfb)](_0x36aafd,_0x57674a['value']['length']),_0x57674a[_0x516e7a(0x10b)](),_0x57674a[_0x516e7a(0xaf)]=_0x32d485+_0x22ae12[_0x516e7a(0x86)],_0x57674a[_0x516e7a(0xa5)]=_0x32d485+_0x22ae12[_0x516e7a(0x86)],_0x57674a[_0x516e7a(0xae)]=_0x4963d9;}else _0x57674a[_0x516e7a(0xda)]+=_0x22ae12,_0x57674a[_0x516e7a(0x10b)]();}},rm[_0x2e363a(0x7d)]=function(){const _0x11c729=_0x2e363a,_0x3aabd7=rm['readClipboard']()||'';rm[_0x11c729(0xe7)]();},rm['rightMenuCommentText']=function(_0x45c1e2){const _0x55bf90=_0x2e363a;rm['hideRightMenu']();const _0x19f33a=document[_0x55bf90(0xf5)](_0x55bf90(0xd2));var _0x57c9a2=_0x19f33a['offsetTop'];window[_0x55bf90(0xd1)](0x0,_0x57c9a2-0x50);if(_0x45c1e2==_0x55bf90(0xe2)||_0x45c1e2=='null')_0x45c1e2=_0x55bf90(0x7a);function _0x129f35(){setTimeout(()=>{const _0x3ef48c=_0x588c;var _0xae6b2=document['getElementsByClassName'](_0x3ef48c(0xbe))[0x0];if(!_0xae6b2)_0x129f35();let _0x31e867=document['createEvent'](_0x3ef48c(0xd8));_0x31e867[_0x3ef48c(0xa8)](_0x3ef48c(0xac),!![],!![]);let _0x54d606=replaceAll(_0x45c1e2,'\x0a','\x0a>\x20');_0xae6b2[_0x3ef48c(0xda)]='>\x20'+_0x54d606+'\x0a\x0a',_0xae6b2[_0x3ef48c(0xf0)](_0x31e867),_0xae6b2['focus'](),_0xae6b2[_0x3ef48c(0xec)](-0x1,-0x1),document[_0x3ef48c(0xf5)](_0x3ef48c(0xdf))&&document[_0x3ef48c(0xf5)](_0x3ef48c(0xdf))[_0x3ef48c(0xee)][_0x3ef48c(0xe1)](_0x3ef48c(0xc7));},0x64);}_0x129f35();};function replaceAll(_0x3a7c11,_0x519d2f,_0x568786){const _0x195746=_0x2e363a;return _0x3a7c11[_0x195746(0x6d)](_0x519d2f)[_0x195746(0x9d)](_0x568786);}rm['searchBaidu']=function(){const _0x44c8bf=_0x2e363a;anzhiyu[_0x44c8bf(0xa9)]('即将跳转到百度搜索',![],0x7d0),setTimeout(function(){const _0x15b7f5=_0x44c8bf;window[_0x15b7f5(0xd5)](_0x15b7f5(0xf7)+selectTextNow);},'2000'),rm[_0x44c8bf(0xe7)]();},rm['copyLink']=function(){const _0x450d7e=_0x2e363a;rm[_0x450d7e(0xbd)](domhref),anzhiyu[_0x450d7e(0xa9)]('已复制链接地址');};function addRightMenuClickEvent(){const _0x169e62=_0x2e363a;document[_0x169e62(0xf5)]('menu-backward')[_0x169e62(0xad)]('click',function(){const _0x37506e=_0x169e62;window[_0x37506e(0xd6)][_0x37506e(0x79)](),rm[_0x37506e(0xe7)]();}),document[_0x169e62(0xf5)](_0x169e62(0x93))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x16d3cc=_0x169e62;window[_0x16d3cc(0xd6)][_0x16d3cc(0x109)](),rm[_0x16d3cc(0xe7)]();}),document[_0x169e62(0xf5)](_0x169e62(0xf8))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x331cec=_0x169e62;window[_0x331cec(0x7e)]['reload']();}),document[_0x169e62(0xf5)](_0x169e62(0xb8))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x35eacf=_0x169e62;anzhiyu['scrollToDest'](0x0,0x1f4),rm[_0x35eacf(0xe7)]();}),document[_0x169e62(0xf5)](_0x169e62(0x89))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x516112=_0x169e62;window[_0x516112(0xb7)]['translatePage'](),rm[_0x516112(0xe7)]();});const _0x26c982=document[_0x169e62(0xaa)](_0x169e62(0xab));_0x26c982[_0x169e62(0xef)](function(_0x11ddea){const _0x4507a1=_0x169e62;_0x11ddea['addEventListener']('click',rm[_0x4507a1(0xe7)]);}),document[_0x169e62(0xf5)](_0x169e62(0xb9))&&document[_0x169e62(0xf5)]('menu-home')[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x15ac94=_0x169e62;window[_0x15ac94(0x7e)]['href']=window[_0x15ac94(0x7e)][_0x15ac94(0x8c)];}),document[_0x169e62(0xf5)]('menu-randomPost')[_0x169e62(0xad)](_0x169e62(0x105),function(){toRandomPost();}),document[_0x169e62(0xf5)](_0x169e62(0x92))[_0x169e62(0xad)](_0x169e62(0x105),anzhiyu['switchCommentBarrage']),document[_0x169e62(0xf5)](_0x169e62(0x9b))['addEventListener'](_0x169e62(0x105),rm['hideRightMenu']),document[_0x169e62(0xf5)](_0x169e62(0x9b))['addEventListener'](_0x169e62(0xdb),function(_0x40f3e3){const _0x28b706=_0x169e62;rm[_0x28b706(0xe7)](),_0x40f3e3[_0x28b706(0x10a)]();}),document[_0x169e62(0xf5)]('menu-copy')[_0x169e62(0xad)]('click',()=>{rm['copyPageUrl']();}),document[_0x169e62(0xf5)](_0x169e62(0x95))[_0x169e62(0xad)](_0x169e62(0x105),rm[_0x169e62(0x7d)]),document['getElementById'](_0x169e62(0x90))['addEventListener']('click',function(){const _0xea4b50=_0x169e62;rm[_0xea4b50(0xbd)](selectTextNow);const _0x55d77f=GLOBAL_CONFIG['copyright'];_0x55d77f[_0xea4b50(0xc5)]&&anzhiyu[_0xea4b50(0xa9)](_0x55d77f['languages'][_0xea4b50(0x80)]);}),document[_0x169e62(0xf5)](_0x169e62(0x8a))[_0x169e62(0xad)]('click',function(){const _0xc88c34=_0x169e62;rm[_0xc88c34(0xfa)](selectTextNow);}),document[_0x169e62(0xf5)]('menu-newwindow')[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x1bc08e=_0x169e62;window[_0x1bc08e(0xd5)](domhref,_0x1bc08e(0xbb)),rm[_0x1bc08e(0xe7)]();}),document['getElementById'](_0x169e62(0xe4))[_0x169e62(0xad)](_0x169e62(0x105),rm[_0x169e62(0xa3)]),document[_0x169e62(0xf5)](_0x169e62(0xf2))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x2b3e92=_0x169e62;anzhiyu[_0x2b3e92(0x72)](domImgSrc,_0x2b3e92(0xc4));}),document[_0x169e62(0xf5)]('menu-newwindowimg')['addEventListener']('click',function(){const _0x4606e9=_0x169e62;window[_0x4606e9(0xd5)](domImgSrc,'_blank'),rm[_0x4606e9(0xe7)]();}),document[_0x169e62(0xf5)](_0x169e62(0xce))[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x27d461=_0x169e62;rm[_0x27d461(0xf4)](domImgSrc);}),document['getElementById'](_0x169e62(0xd9))['addEventListener']('click',rm['searchBaidu']),document[_0x169e62(0xf5)](_0x169e62(0x98))[_0x169e62(0xad)]('click',anzhiyu[_0x169e62(0xdd)]),document['getElementById'](_0x169e62(0xa6))[_0x169e62(0xad)]('click',anzhiyu[_0x169e62(0x106)]),document[_0x169e62(0xf5)](_0x169e62(0xd0))[_0x169e62(0xad)](_0x169e62(0x105),anzhiyu['musicSkipForward']),document['getElementById']('menu-music-copyMusicName')[_0x169e62(0xad)](_0x169e62(0x105),function(){const _0x133635=_0x169e62;rm[_0x133635(0xbd)](anzhiyu[_0x133635(0xe6)]()),anzhiyu[_0x133635(0xa9)]('复制歌曲名称成功',![],0xbb8);});}addRightMenuClickEvent();